{"version":3,"sources":["serviceWorker.js","redux/reducer.js","redux/store.js","user/user-service.js","user/user.js","post-page/postPageService.js","redux/reducer-action.js","redux/thunk-functions.js","post-page/post-item.js","post-page/post-page.js","default-page/DefaultPage.js","navbar/user-search-list.js","navbar/navbar.js","login/login.js","signup/signup.js","user-info/user-info.js","user-profile/user-profile.js","home/home.js","index.js","login/login.service.js"],"names":["Boolean","window","location","hostname","match","stateInitial","posts","currentPostId","comments","loadingPosts","lastId","loadingUsers","users","loggedInUserInfo","reducer","state","action","console","log","type","data","length","Object","assign","concat","id","JSON","stringify","currentPosts","unshift","store","createStore","applyMiddleware","thunk","BASE_URL","process","UserService","getMyLoggedInUserInfo","a","async","axios","get","headers","Authorization","localStorage","getItem","then","res","dir","catch","err","response","status","removeItem","replace","e","logout","error","sendMessage","messageObject","post","loadChatForUser","leastId","username","updateChat","firstOpening","Users","props","processRawChat","rawChat","processedChat","map","chat","push","fromUsername","sender","toUsername","receiver","message","content","fetchedChat","userMessage","chats","undefined","concatenatedChat","Array","from","newChats","setState","loadingChat","document","getElementById","scrollTop","scrollHeight","scrollBy","openOrCloseChat","currentUserChattingWith","open","onscroll","debounce","to","handleInputChange","target","value","userMap","Map","distinctUser","socketEndpointUrl","onlineUsers","socket","SocketIOClient","on","emit","first_name","last_name","item","has","set","name","bind","elem","user","Card","className","Header","Body","this","key","onClick","aria-controls","aria-expanded","Collapse","in","style","marginBottom","backgroundColor","textAlign","borderRadius","display","marginTop","onChange","placeholder","icon","faArrowRight","color","Component","PostPageService","addPosts","postContent","addPostWithAttachment","ReducerActions","LOAD_POSTS","SET_ABOUT_TO_LOAD_POST_TRUE","RECEIVE_POSTS","DONE_LOADING_POSTS","getHeader","checkErrorAndRedirectIfNecessary","ReduxThunkFunctions","loadPosts","pageNo","dispatch","getState","currentState","url","loadUsers","loadCurrentUserInfo","PostItem","display_picture","src","includes","alt","dbDate","date","Date","getFullYear","getMonth","toString","padStart","getDate","getHours","getMinutes","getStringDate","createdAt","attachments","parse","responsive","desktop","breakpoint","max","min","items","slidesToSlide","tablet","mobile","attachment","index","endsWith","controls","muted","preload","PostPage","submitPost","posting","result","prependNewPost","myProfilePicture","addPostWithAttachmentIfAny","preventDefault","formData","FormData","selectedFiles","i","append","alert","loadUserInfo","handlePostContentChange","handleFileChange","files","getPictureOrAlternatePicture","isLoading","hasMore","userAgentString","navigator","userAgent","chromeAgent","indexOf","safariAgent","documentElement","offsetHeight","innerHeight","height","width","onSubmit","multiple","accept","Button","disabled","Spinner","as","animation","size","role","aria-hidden","React","connect","resetLastIdFetched","DefaultPage","getImageFullPath","dp","updateDisplayPicture","selectedFile","uploading","setItem","history","Image","roundedCircle","email","gender","withRouter","UserSearchList","AppNavbar","href","loadInfoPage","searchField","showMore","loadUsersByFilters","searchFilter","viewUserProfile","fetchUserInformation","setTarget","loadUsersByFilter","ref","createRef","loadLogin","pathname","ool","Navbar","expand","bg","Brand","Toggle","Nav","Form","inline","InputGroup","FormControl","aria-label","ButtonToolbar","Overlay","show","placement","container","current","containerPadding","Popover","Title","Content","NavDropdown","title","Item","eventKey","Divider","Login","event","login","loading","LoginService","access_token","properties","errorMessage","password","faUser","faKey","variant","Signup","signup","signUp","successful","signUpResponse","password2","faEnvelope","UserInfo","getCurrentUserInfo","mapUserInfoToState","updateUserInformation","successfulMessage","updateUserPassword","currentPassword","newPassword1","newPassword","newPassword2","UserProfile","params","userInfo","Table","striped","Home","exact","path","component","ReactDOM","render","serviceWorker","ready","registration","unregister","LOGIN_URL","SIGNUP_URL","getBase64StringFromClientCredentials","Buffer","loginData","grant_type","queryString","error_description","signUpData"],"mappings":"qfAYoBA,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2D,qBClBAC,EAAe,CACjBC,MAAO,GACPC,cAAe,KACfC,SAAU,GACVC,cAAc,EACdC,OAAQ,EACRC,cAAc,EACdC,MAAO,GACPC,iBAAkB,IAyCPC,EAtCC,WAAmC,IAAlCC,EAAiC,uDAAzBV,EAAcW,EAAW,uCAE9C,OADAC,QAAQC,IAAIF,EAAOG,MACXH,EAAOG,MACX,IAAM,gBACF,OAAIH,EAAOI,KAAKC,OAAS,EACdC,OAAOC,OAAO,GAAIR,EAAO,CAAET,MAAOS,EAAMT,MAAMkB,OAAOR,EAAOI,MAAOV,OAAQM,EAAOI,KAAMJ,EAAOI,KAAKC,OAAS,GAAII,GAAIhB,cAAc,IAEvIa,OAAOC,OAAO,GAAIR,EAAO,CAAET,MAAOS,EAAMT,MAAMkB,OAAOR,EAAOI,MAAOX,cAAc,IAC5F,IAAM,8BAEF,OADAQ,QAAQC,IAAI,wCACLI,OAAOC,OAAO,GAAIR,EAAO,CAAEN,cAAc,IACpD,IAAM,qBAEF,OADAQ,QAAQC,IAAI,yCACLI,OAAOC,OAAO,GAAIR,EAAO,CAAEN,cAAc,IACpD,IAAM,qBAEF,OADAQ,QAAQC,IAAI,sBACLI,OAAOC,OAAO,GAAIR,EAAO,CAAEJ,cAAc,IACpD,IAAM,gBAEF,OADAM,QAAQC,IAAI,iBACLI,OAAOC,OAAO,GAAIR,EAAO,CAAEJ,cAAc,IACpD,IAAK,gBACD,OAAOW,OAAOC,OAAO,GAAIR,EAAO,CAAEJ,cAAc,EAAOC,MAAOI,EAAOI,OACzE,IAAK,mBAED,OADAH,QAAQC,IAAI,wBAA0BQ,KAAKC,UAAUX,EAAOI,OACrDE,OAAOC,OAAO,GAAIR,EAAO,CAAEF,iBAAkBG,EAAOI,OAC/D,IAAK,gBACD,OAAOE,OAAOC,OAAO,GAAIR,EAAO,CAACL,OAAQ,IAC7C,IAAK,mCACD,IAAIkB,EAAeb,EAAMT,MAEzB,OADAsB,EAAaC,QAAQb,EAAOI,MACrBE,OAAOC,OAAO,GAAIR,EAAO,CAACT,MAAOsB,IAC5C,QAEI,OADAX,QAAQC,IAAI,cACLH,ICrCJe,EAFHC,YAAYjB,EAASkB,YAAgBC,M,qLCJ3CC,EAAWC,yBAqDFC,EAnDK,CAEhBC,sBAAwB,oBAAAC,EAAAC,OAAA,gDACpB,IACIC,IACCC,IADD,UACQP,EADR,WAC2B,CACvBQ,QAAU,CAACC,cAAa,iBAAaC,aAAaC,QAAQ,oBAC3DC,MAAK,SAAAC,GAEJ,OADA9B,QAAQ+B,IAAID,EAAI3B,MACT2B,EAAI3B,QACZ6B,OAAM,SAAAC,GACLjC,QAAQC,IAAI,yBAA0BgC,GACX,KAAvBA,EAAIC,SAASC,SACbR,aAAaS,WAAW,gBACxBpD,OAAOC,SAASoD,QAAQ,cAGlC,MAAMC,GACJtC,QAAQC,IAAI,yBAA0BqC,GAhBtB,sCAqBxBC,OAAS,WACLhB,IACGC,IADH,UACUP,EADV,UAC4B,CAACQ,QAAU,CAACC,cAAa,iBAAaC,aAAaC,QAAQ,oBACpFC,MAAK,SAAAC,GAAQ9B,QAAQC,IAAI,mCACzB+B,OAAM,SAAAC,GAAG,OAAIjC,QAAQwC,MAAMP,OAGlCQ,YAAc,SAACC,GACXnB,IACGoB,KADH,UACW1B,EADX,aACgCyB,EAAc,CAACjB,QAAU,CAACC,cAAa,iBAAaC,aAAaC,QAAQ,oBACtGC,MAAK,SAAAC,GAAG,OAAI9B,QAAQC,IAAI6B,EAAI3B,SAC5B6B,OAAM,SAAAC,GAAG,OAAIjC,QAAQwC,MAAMP,OAGlCW,gBAAkB,SAACC,EAASC,EAAUC,GAAsC,IAA1BC,EAAyB,wDACvEzB,IACGC,IADH,UACUP,EADV,kCAC4C4B,EAD5C,YACuDC,GAAY,CAACrB,QAAU,CAACC,cAAa,iBAAaC,aAAaC,QAAQ,oBAC3HC,MAAK,SAAAC,GACF9B,QAAQC,IAAI6B,EAAI3B,MACZ2B,EAAI3B,KAAKC,OAAS,GAClB2C,EAAWD,EAAUhB,EAAI3B,KAAM6C,MAGtChB,OAAM,SAAAC,GAAG,OAAIjC,QAAQwC,MAAMP,Q,iBC2JvBgB,E,YAjMX,WAAYC,GAAQ,IAAD,8BACf,4CAAMA,KAoEVC,eAAiB,SAACC,GACd,IAAMC,EAAgB,GAKtB,OAJAD,EAAQE,KAAK,SAAAC,GACTF,EAAcG,KAAK,CAACC,aAAeF,EAAKG,OAAQC,WAAaJ,EAAKK,SAAUC,QAAUN,EAAKO,QAAStD,GAAK+C,EAAK/C,QAG3G6C,GA3EQ,EA8EnBN,WAAa,SAACD,EAAUiB,GAAqC,IAAxBf,EAAuB,wDACxDhD,QAAQC,IAAI,iBACZ8D,EAAc,EAAKZ,eAAeY,GAClC,IAAIC,EAAc,EAAKlE,MAAMmE,MAAMnB,GACnCkB,OAA+BE,IAAhBF,EAA6B,GAAKA,EACjD,IAAIG,EAAmBJ,EAAYxD,OAAO6D,MAAMC,KAAKL,IACjDM,EAAWjE,OAAOC,OAAO,GAAI,EAAKR,MAAMmE,MAA7B5D,OAAA,IAAAA,CAAA,GAAuCyC,EAAWqB,IACjE,EAAKI,SAAS,CACVN,MAAOK,EACPE,aAAc,IAEdxB,EACAyB,SAASC,eAAe,iBAAiBC,UAAYF,SAASC,eAAe,iBAAiBE,aAE9FH,SAASC,eAAe,iBAAiBG,SAAS,EAAE,MA5FzC,EA+FnBC,gBAAkB,SAAChC,GACf9C,QAAQC,IAAI,oBAAsB6C,GAClC,EAAKyB,SAAS,CACVQ,wBAAyBjC,EACzBkC,MAAO,EAAKlF,MAAMkF,OAEtB,IAAInC,OAAyCqB,GAA9B,EAAKpE,MAAMmE,MAAMnB,IAA0B,EAAKhD,MAAMmE,MAAMnB,GAAU1C,OAAS,EAC3F,EAAKN,MAAMmE,MAAMnB,GAAU,GAAGtC,GAAK,EAEjC,EAAKV,MAAM0E,oBAIkBN,GAA9B,EAAKpE,MAAMmE,MAAMnB,IAA0B,EAAKhD,MAAMmE,MAAMnB,GAAU1C,OAAS,KAC/Ee,EAAYyB,gBAAgBC,EAASC,EAAU,EAAKC,YAAY,GAGpE0B,SAASC,eAAe,iBAAiBO,SAAWC,KAAS,WACzD,GAA2D,IAAvDT,SAASC,eAAe,iBAAiBC,UAAiB,CAC1D,GAAI,EAAK7E,MAAM0E,YACX,OAEJ,EAAKD,SAAS,CAACC,aAAc,IAC7B3B,OAAyCqB,GAA9B,EAAKpE,MAAMmE,MAAMnB,IAA0B,EAAKhD,MAAMmE,MAAMnB,GAAU1C,OAAS,EACxF,EAAKN,MAAMmE,MAAMnB,GAAU,GAAGtC,GAAK,EACrCR,QAAQC,IAAI,eAAiB4C,GAC7B1B,EAAYyB,gBAAgBC,EAASC,EAAU,EAAKC,eAEzD,OA3HY,EA8HnBN,YAAc,WACV,QAA2ByB,IAAvB,EAAKpE,MAAM+D,SAAgD,KAAvB,EAAK/D,MAAM+D,QAAnD,CACA,IAAMnB,EAAgB,CAClBmB,QAAS,EAAK/D,MAAM+D,QACpBsB,GAAI,EAAKrF,MAAMiF,yBAInB5D,EAAYsB,YAAYC,GACxB,EAAK6B,SAAS,CAAEV,QAAS,KACzBY,SAASC,eAAe,iBAAiBC,UAAYF,SAASC,eAAe,iBAAiBE,eAxI/E,EA2InBQ,kBAAoB,SAAC9C,GACjB,EAAKiC,SAAS,CACVV,QAASvB,EAAE+C,OAAOC,SA3ItB,EAAKC,QAAU,IAAIC,IACnB,EAAKC,aAAe,GACpB,EAAK3F,MAAQ,CACTkF,MAAM,EACNU,kBAAmBxE,yBACnByE,YAAa,GACbZ,wBAAyB,GACzBlB,QAAS,GACTI,MAAO,GACPO,aAAc,GAElB,EAAKoB,OAASC,IAAe,EAAK/F,MAAM4F,mBAExC,EAAKE,OAAOE,GAAG,uBAAuB,WAClC,EAAKF,OAAOG,KAAK,OAAQ,CAAEjD,SAAU9D,OAAO2C,aAAamB,SAAUkD,WAAYhH,OAAO2C,aAAaqE,WAAYC,UAAWjH,OAAO2C,aAAasE,eAGlJ,EAAKL,OAAOE,GAAG,aAAa,SAAA3F,GACxB,EAAKsF,aAAe,GACpB,IAAMnC,EAAM,IAAIkC,IAFgB,uBAGhC,YAAmBrF,EAAnB,+CAAyB,CAAC,IAAf+F,EAAc,QACrB,GAAIlH,OAAO2C,aAAaC,QAAQ,cAAgBsE,EAAKpD,WAAaQ,EAAI6C,IAAID,EAAKpD,YAC3EQ,EAAI8C,IAAIF,EAAKpD,UAAU,GACvB,EAAK2C,aAAajC,KAAK,CACnBV,SAAUoD,EAAKpD,SACfuD,KAAMH,EAAKG,YAG8CnC,IAAzD,EAAKpE,MAAMmE,MAAM,EAAKnE,MAAMiF,0BAAwC,CACpE/E,QAAQC,IAAI,qCACZ,IAAIqE,EAAWjE,OAAOC,OAAO,GAAI,EAAKR,MAAMmE,MAA7B5D,OAAA,IAAAA,CAAA,GAAuC6F,EAAKpD,SAAW,KACtE,EAAKyB,SAAS,CACVN,MAAOK,MAfS,kFAoBhC,EAAKC,SAAS,CACVoB,YAAa,EAAKF,kBAI1B,EAAKX,gBAAkB,EAAKA,gBAAgBwB,KAArB,gBACvB,EAAK7D,YAAc,EAAKA,YAAY6D,KAAjB,gBACnB,EAAKlB,kBAAoB,EAAKA,kBAAkBkB,KAAvB,gBACzB,EAAKV,OAAOE,GAAG,4BAA4B,SAAA3F,GACvC,IAAIoG,EAAO9B,SAASC,eAAe,iBAGnC,GAFA6B,EAAK5B,UAAY4B,EAAK3B,aACtB5E,QAAQC,IAAI,mBAAqBQ,KAAKC,UAAUP,IAC5CA,EAAKwD,aAAe3E,OAAO2C,aAAaC,QAAQ,aAAezB,EAAKsD,eAAiBzE,OAAO2C,aAAaC,QAAQ,YAAa,CAC9H,IAAM4E,EAAOrG,EAAKwD,aAAe3E,OAAO2C,aAAaC,QAAQ,YAAczB,EAAKwD,WAAaxD,EAAKsD,aAC9FO,EAAc,EAAKlE,MAAMmE,MAAMuC,IACnCxC,OAA+BE,IAAhBF,EAA6B,GAAKA,GACrCR,KAAKrD,GACjB,IAAImE,EAAWjE,OAAOC,OAAO,GAAI,EAAKR,MAAMmE,MAA7B5D,OAAA,IAAAA,CAAA,GAAuCmG,EAAOxC,IAC7D,EAAKO,SAAS,CACVN,MAAOK,IAEXtE,QAAQC,IAAI,aAAeQ,KAAKC,UAAU,EAAKZ,MAAMmE,aAErDjE,QAAQC,IAAI,uDA9DL,E,sEAgJT,IAAD,OACL,OACI,6BACI,kBAACwG,EAAA,EAAD,CAAMC,UAAU,iBACZ,kBAACD,EAAA,EAAKE,OAAN,wBAGA,kBAACF,EAAA,EAAKG,KAAN,CAAWF,UAAU,uBAChBG,KAAK/G,MAAM6F,YAAYrC,KAAI,SAAAkD,GAAI,OAC5B,yBAAKM,IAAKN,EAAK1D,SAAU4D,UAAU,gBAAgBK,QAAS,WAAQ,EAAKjC,gBAAgB0B,EAAK1D,WAAakE,gBAAc,oBACrHC,gBAAe,EAAKnH,MAAMkF,MAE1B,0BAAM0B,UAAU,gBACfF,EAAKH,WAMtB,kBAACa,EAAA,EAAD,CAAUC,GAAIN,KAAK/G,MAAMkF,KAAM0B,UAAU,iBACrC,yBAAKlG,GAAG,qBACJ,yBAAKkG,UAAU,QACX,yBAAKA,UAAU,QAAQK,QAAS,kBAAI,EAAKxC,SAAS,CAACS,MAAO,MAAU6B,KAAK/G,MAAMiF,yBAC/E,yBAAK2B,UAAU,qBAAqBlG,GAAG,iBACK,KAAvCqG,KAAK/G,MAAMiF,wBAAiC,KAAO8B,KAAK/G,MAAMmE,MAAM4C,KAAK/G,MAAMiF,yBAAyBzB,KAAI,SAAAC,GAAI,OAAI,yBAAK6D,MAAO,CAAEC,aAAc,mBAC5IrI,OAAO2C,aAAaC,QAAQ,cAAgB2B,EAAKE,aAAe,yBAAKiD,UAAU,SAASU,MAAO,CAAEE,gBAAiB,UAAWC,UAAW,QAASC,aAAc,MAAOC,QAAS,QAASC,UAAW,QAC/LnE,EAAKM,SACN,yBAAK6C,UAAU,SAASU,MAAO,CAAEE,gBAAiB,UAAWC,UAAW,OAAQC,aAAc,MAAOC,QAAS,QAASC,UAAW,QAAUnE,EAAKM,cAI7J,yBAAK6C,UAAU,IACX,yBAAKA,UAAU,oBAEX,2BAAOxG,KAAK,OAAOmG,KAAK,UAAUf,MAAOuB,KAAK/G,MAAM+D,QAAS6C,UAAU,gBAAgBiB,SAAUd,KAAKzB,kBAAmBwC,YAAY,yBACrI,yBAAKlB,UAAU,qBAAqBK,QAASF,KAAKpE,aAC9C,0BAAMiE,UAAU,0BAA0B,kBAAC,IAAD,CAAiBmB,KAAMC,IAAcC,MAAM,sB,GAtLzGC,aC+BLC,G,OArCS,CACpBC,SAAW,SAAOC,GAAP,SAAA9G,EAAAC,OAAA,2EAAAD,EAAA,MAEUE,IACZoB,KADY,UALRzB,yBAKQ,QACY,CAAC4C,QAAUqE,GAAc,CAC9C1G,QAAU,CAACC,cAAgB,UAAYC,aAAaC,QAAQ,oBAJ7D,+EAOH5B,QAAQ+B,IAAI,KAAEG,UACW,KAArB,KAAEA,SAASC,SACXR,aAAaS,WAAW,gBACxBpD,OAAOC,SAASoD,QAAQ,WAVzB,mBAYI,GAZJ,yDAiBX+F,sBAAwB,SAAOD,GAAP,SAAA9G,EAAAC,OAAA,2EAAAD,EAAA,MAEHE,IACZoB,KADY,UAtBRzB,yBAsBQ,wBAC4BiH,EAAa,CAClD1G,QAAU,CAACC,cAAgB,UAAYC,aAAaC,QAAQ,gBAAiB,eAAgB,0BAJjF,+EAOhB5B,QAAQ+B,IAAI,KAAEG,UACW,KAArB,KAAEA,SAASC,SACXR,aAAaS,WAAW,gBACxBpD,OAAOC,SAASoD,QAAQ,WAVZ,mBAYT,GAZS,2D,kBCVbgG,EAXQ,CAEnBC,WAAa,aACbC,4BAA8B,8BAC9BC,cAAgB,8BAChBC,mBAAqB,sBCCnBC,EAAY,WACd,MAAO,CAAChH,cAAgB,UAAYC,aAAaC,QAAQ,kBAGvD+G,EAAmC,SAACnG,GACtCxC,QAAQwC,MAAMA,GACd,IACiC,KAAzBA,EAAMN,SAASC,SACfR,aAAaS,WAAW,gBACxBpD,OAAOC,SAASoD,QAAQ,WAE9B,MAAMG,GACJxC,QAAQwC,MAAMA,GACdxC,QAAQC,IAAI,qCACZjB,OAAOC,SAASoD,QAAQ,YA2EjBuG,EAvEa,CAExBC,UAAY,WAAe,IAAdC,EAAa,uDAAN,EAEhB,OADAjI,EAAMkI,SAAS,CAAC7I,KAAM,gCACd,SAAC6I,EAAUC,GACf,IACI,IAAMC,EAAeD,IACjBE,EAAG,UA5BNhI,yBA4BM,yBAA+B4H,EAA/B,qBA3BN,IA4BGG,EAAaxJ,OAAS,IACrByJ,EAAG,UA9BPhI,yBA8BO,oCAA0C+H,EAAaxJ,OAAvD,qBA7BP,KA+BD8B,IACCC,IAAI0H,EAAK,CACNzH,QAAUiH,MACX7G,MAAK,SAAAC,GACJiH,EAAS,CAAC7I,KAAO,gBAAiBC,KAAK2B,EAAI3B,UAC5C6B,OAAM,SAACQ,EAAOrC,GACbH,QAAQC,IAAIuC,GACZmG,EAAiCnG,GACjCuG,EAAS,CAAC7I,KAAMmI,EAAeI,wBAErC,MAAOnG,GACLtC,QAAQ+B,IAAIO,GACZyG,EAAS,CAAC7I,KAAMmI,EAAeI,wBAM3CU,UAAY,WAER,OADAtI,EAAMkI,SAAS,CAAC7I,KAAM,kBACf,SAAC6I,EAAUC,GACdzH,IACCC,IADD,UArDKN,yBAqDL,cAC8B,CAC1BO,QAAUiH,MAEb7G,MAAK,SAAAC,GACFiH,EAAS,CAAC7I,KAAK,gBAAiBC,KAAO2B,EAAI3B,KAAKR,QAChDoJ,EAAS,CAAC7I,KAAM,0BAGnB8B,OAAM,SAAAC,GACHjC,QAAQwC,MAAMP,GACd0G,EAAiC1G,GACjC8G,EAAS,CAAC7I,KAAM,4BAM5BkJ,oBAAsB,WAClB,OAAO,SAACL,EAAUC,GACd,IACIzH,IACCC,IADD,UA1ECN,yBA0ED,WAC2B,CACvBO,QAAU,CAACC,cAAa,iBAAaC,aAAaC,QAAQ,oBAC3DC,MAAK,SAAAC,GACJiH,EAAS,CAAC7I,KAAK,mBAAoBC,KAAO2B,EAAI3B,UAC/C6B,OAAM,SAAAC,GACLjC,QAAQC,IAAI,yBAA0BgC,GACtC0G,EAAiC1G,MAEvC,MAAMO,Q,kBCML6G,G,cArFE,SAAC,GAAc,IAEUC,EAFtB3G,EAAW,EAAXA,KA8BhB,OACI,yBAAK+D,UAAU,4BACX,kBAACD,EAAA,EAAD,KACI,kBAACA,EAAA,EAAKG,KAAN,KACI,yBAAKpG,GAAG,oBACJ,yBAAKkG,UAAU,WACX,yBAAK6C,KAlCSD,EAkCyB3G,EAAK6D,KAAK8C,qBAjCzCpF,IAApBoF,GAAqD,OAApBA,GAAgD,KAApBA,EAA4BA,EAAgBE,SAAS,WAAqCF,EAAhE,UAA4CA,GAAsC,sBAiC1FG,IAAI,OAAO/C,UAAU,eACxF,yBAAKA,UAAU,0BACX,8BAAQ/D,EAAK6D,KAAKR,WAAlB,IAA+BrD,EAAK6D,KAAKP,WAAiB,6BAC1D,8BAfN,SAACyD,GACnB,IAAMC,EAAO,IAAIC,KAAKF,GAEtB,OAAOC,EAAKE,cAAgB,KAAOF,EAAKG,WAAa,GAAGC,WAAWC,SAAS,EAAG,KAAO,IAAOL,EAAKM,UAAWF,WAAWC,SAAS,EAAG,KAAO,IAAOL,EAAKO,WAAYH,WAAWC,SAAS,EAAG,KAAO,IAAOL,EAAKQ,aAAcJ,WAAWC,SAAS,EAAG,KAYnNI,CAAczH,EAAK0H,eAKtC,yBAAK3D,UAAU,gBACV/D,EAAKmB,SAGV,yBAAK4C,UAAU,6BACU,MAApB/D,EAAK2H,aAA2C,IAApB3H,EAAK2H,aAAqB7J,KAAK8J,MAAM5H,EAAK2H,aAAalK,OAAS,GAGzF,6BAEI,kBAAC,IAAD,CAAUoK,WAhDnB,CACfC,QAAS,CACLC,WAAY,CAAEC,IAAK,IAAMC,IAAK,MAC9BC,MAAO,EACPC,cAAe,GAEnBC,OAAQ,CACJL,WAAY,CAAEC,IAAK,KAAMC,IAAK,KAC9BC,MAAO,EACPC,cAAe,GAEnBE,OAAQ,CACJN,WAAY,CAAEC,IAAK,IAAKC,IAAK,GAC7BC,MAAO,EACPC,cAAe,KAoCarK,KAAK8J,MAAM5H,EAAK2H,aAAahH,KAAI,SAAC2H,EAAYC,GAAb,OAC7B,8BACMD,EAAWE,SAAS,SAAW,yBAC7BzE,UAAU,gBACV6C,IAAK0B,EACLxB,IAAI,yBAGPwB,EAAWE,SAAS,SACjB,2BAAQC,UAAQ,EAAC1E,UAAU,gBAAgBlG,GAAI,cAAgB0K,EAAOG,MAAM,QAAQC,QAAQ,YACxF,4BAAQ/B,IAAK0B,EAAY/K,KAAK,2BC5DhFqL,E,YAEF,WAAYrI,GAAQ,IAAD,uBACf,4CAAMA,KA8CV2F,UAAY,WACR7I,QAAQC,IAAI,6BAhDG,EA2DnBuL,WAAa,0BAAAnK,EAAAC,OAAA,uDACT,EAAKiD,SAAS,CACVkH,SAAS,IAFJ,WAAApK,EAAA,MAIY4G,EAAgBC,SAAS,EAAKpI,MAAMqI,cAJhD,YAIHuD,EAJG,0CAAArK,EAAA,MAMC,EAAK6B,MAAMyI,eAAe,CAAE7H,QAAS4H,EAAOvL,KAAK2D,QAAStD,GAAIkL,EAAOvL,KAAKK,GAAI6J,UAAWqB,EAAOvL,KAAKkK,UAAW7D,KAAM,CAAER,WAAYhH,OAAO2C,aAAaqE,WAAYC,UAAWjH,OAAO2C,aAAasE,UAAWqD,gBAAkB,EAAKxJ,MAAM8L,qBAN5O,OAOL,EAAKrH,SAAS,CACVkH,SAAS,EACTtD,YAAa,KATZ,sCA3DM,EAwEnB0D,2BAA6B,SAAOvJ,GAAP,mBAAAjB,EAAAC,OAAA,gDAOzB,IANAgB,EAAEwJ,iBACF,EAAKvH,SAAS,CACVkH,SAAS,IAETM,EAAW,IAAIC,SACnBhM,QAAQC,IAAI,EAAKH,MAAMmM,eACfC,EAAI,EAAGA,EAAG,EAAKpM,MAAMmM,cAAc7L,OAAQ8L,IAC/ClM,QAAQC,IAAI,aACZ8L,EAASI,OAAO,QAAS,EAAKrM,MAAMmM,cAAcC,IAT7B,OAWzBH,EAASI,OAAO,UAAW,EAAKrM,MAAMqI,aACtCnI,QAAQC,IAAI8L,GAZa,WAAA1K,EAAA,MAcJ4G,EAAgBG,sBAAsB2D,IAdlC,YAcnBL,EAdmB,4CAAArK,EAAA,MAgBf,EAAK6B,MAAMyI,eAAe,CAAErB,YAAaoB,EAAOvL,KAAKmK,YAAaxG,QAAS4H,EAAOvL,KAAK2D,QAAStD,GAAIkL,EAAOvL,KAAKK,GAAI6J,UAAWqB,EAAOvL,KAAKkK,UAAW7D,KAAM,CAAER,WAAYhH,OAAO2C,aAAaqE,WAAYC,UAAWjH,OAAO2C,aAAasE,UAAWqD,gBAAkB,EAAKxJ,MAAM8L,qBAhBlQ,QAiBrB,EAAKrH,SAAS,CACVkH,SAAS,EACTtD,YAAa,KAEjB1D,SAASC,eAAe,SAASY,MAAO,KArBnB,wBAuBrB8G,MAAM,mDACN,EAAK7H,SAAS,CACVkH,SAAS,EACTtD,YAAa,KA1BI,uCAxEV,EAsGnBkE,aAAe,WACX9K,IACKC,IADL,UACYN,yBADZ,WACgE,CAAEO,QAAS,CAAEC,cAAe,UAAYC,aAAaC,QAAQ,mBACxHC,MAAK,SAAAC,QAC+BoC,IAA7BpC,EAAI3B,KAAKmJ,iBAA8D,OAA7BxH,EAAI3B,KAAKmJ,iBACnD,EAAK/E,SAAS,CAAEqH,iBAAkB9J,EAAI3B,KAAKmJ,qBAGlDtH,OAAM,SAAAC,GAAG,OAAIjC,QAAQwC,MAAMP,OA9GjB,EAiHnBqK,wBAA0B,SAAChK,GACvB,EAAKiC,SAAL,eACKjC,EAAE+C,OAAOgB,KAAO/D,EAAE+C,OAAOC,SAnHf,EAsHnBiH,iBAAmB,SAACjK,GAChB,EAAKiC,SAAS,CAAC0H,cAAgB3J,EAAE+C,OAAOmH,SAvHzB,EAyHnBC,6BAA+B,WAC3B,MAAwC,KAAhC,EAAK3M,MAAM8L,uBAA2D1H,IAAhC,EAAKpE,MAAM8L,iBAAkC,qBAAuB,EAAK9L,MAAM8L,kBAxH7H,EAAK9L,MAAQ,CACT0C,OAAO,EACPkK,WAAW,EACXC,SAAS,EACT3H,MAAM,EACNmD,YAAa,GACbyD,iBAAkB,GAClBH,SAAS,EACTQ,cAAgB,IAEpB,EAAKI,eAEL,IAAIO,EAAmBC,UAAUC,UAdlB,OAef,EAAKC,YAAcH,EAAgBI,QAAQ,WAAa,EACxD,EAAKC,YAAeL,EAAgBI,QAAQ,WAAa,EACzDhO,OAAOiG,SAAWC,KAAS,WAAO,IAAD,iBAGzBpF,MAAS0C,EAHgB,EAGhBA,MAELmK,GALqB,EAIrBD,UAJqB,EAKrBC,SAIR,GADA3M,QAAQC,IAAI,iBAAmBiD,EAAM1D,eACjCgD,IAASU,EAAM1D,cAAiBmN,IAI/BlI,SAASyI,gBAAgBC,aAAe1I,SAASyI,gBAAgBvI,YAAcF,SAASyI,gBAAgBtI,cAAgB,EAAKqI,aAC7HjO,OAAOoO,YAAc3I,SAASyI,gBAAgBvI,YAAcF,SAASyI,gBAAgBC,cACxF,CACE,GAAIjK,EAAM1D,aAEN,YADAQ,QAAQC,IAAI,wBAGhBiD,EAAM2F,eAGX,KAEH,EAAK2C,WAAa,EAAKA,WAAWlF,KAAhB,gBAClB,EAAKgG,wBAA0B,EAAKA,wBAAwBhG,KAA7B,gBA3ChB,E,iFAoDftG,QAAQC,IAAI,yB,2CAIZ4G,KAAK3D,MAAM2F,c,+BAqEX,OAEI,yBAAKnC,UAAU,aAEX,kBAACD,EAAA,EAAD,CAAMC,UAAU,iBACZ,kBAACD,EAAA,EAAKE,OAAN,CAAaD,UAAU,wBAAvB,eACA,kBAACD,EAAA,EAAKG,KAAN,CAAWF,UAAU,sBACjB,yBAAKA,UAAU,oBACX,yBAAKA,UAAU,sBACX,yBAAK6C,IAAK1C,KAAK4F,+BAAgCY,OAAQ,GAAIC,MAAO,GAAI5G,UAAU,gBAEpF,8BAAUL,KAAK,cAAcK,UAAU,0BAA0BpB,MAAOuB,KAAK/G,MAAMqI,YAAaR,SAAUd,KAAKyF,wBAAyB1E,YAAY,2BAEhK,0BAAM2F,SAAU1G,KAAKgF,2BAA4BnF,UAAU,qBAEnD,2BAAOxG,KAAK,OAAOsN,SAAS,WAAWnH,KAAK,QAAQoH,OAAO,iCAAiCjN,GAAG,QAAQkG,UAAU,2BAA2BiB,SAAUd,KAAK0F,iBAAkB3E,YAAY,2BAFjM,IAE6N,6BAErN,kBAAC8F,EAAA,EAAD,CAAQhH,UAAU,qBAAqBK,QAASF,KAAKgF,2BAA4B8B,SAAU9G,KAAK/G,MAAM2L,SACjG5E,KAAK/G,MAAM2L,QAAU,kBAACmC,EAAA,EAAD,CAClBC,GAAG,OACHC,UAAU,OACVC,KAAK,KACLC,KAAK,SACLC,cAAY,SACX,KACJpH,KAAK/G,MAAM2L,QAAU,4CAA0B,2CAM3D5E,KAAK3D,MAAM7D,MAAMiE,KAAI,SAAAX,GAAI,OAAI,kBAAC,EAAD,CAAUmE,IAAKnE,EAAKnC,GAAImC,KAAMA,EAAM+D,UAAU,YAE1EG,KAAK3D,MAAM1D,aAAgB,4CAAyB,U,GAhK/C0O,IAAMlG,WAiMdmG,eAvBS,SAAArO,GACpB,MAAO,CACHT,MAAOS,EAAMT,MACbG,aAAcM,EAAMN,iBAID,SAACuJ,GACxB,MAAO,CACHF,UAAW,oBAAAxH,EAAAC,OAAA,uDACPtB,QAAQC,IAAI,uBADL,WAAAoB,EAAA,MAED0H,EAASH,EAAoBC,cAF5B,sCAIXuF,mBAAoB,WAChBrF,EAAS,CAAE7I,KAAM,mBAErByL,eAAgB,SAAChJ,GACboG,EAAS,CAAE7I,KAAM,mCAAoCC,KAAMwC,QAMxDwL,CAA8C5C,G,SCpMvDtK,EAAQ,UAAMC,0BAGdmN,E,YAGF,WAAYnL,GAAQ,IAAD,8BACf,4CAAMA,KAUVoL,iBAAmB,SAACC,GAChB,YAAcrK,IAAPqK,GAA2B,KAAPA,GAAkB,OAALA,EAAY,qBAAuBA,GAZ5D,EAenBC,qBAAuB,SAAClM,GACpBA,EAAEwJ,iBACF,IAAIC,EAAW,IAAIC,SACnBhM,QAAQC,IAAI,EAAKH,MAAM2O,cACvB1C,EAASI,OAAO,OAAQ,EAAKrM,MAAM2O,cACnCzO,QAAQ+B,IAAIgK,GACZ,EAAKxH,SAAS,CAACmK,WAAY,IAC3BnN,IACGoB,KADH,UACW1B,EADX,gBACmC8K,EAAU,CAACtK,QAAU,CAACC,cAAgB,UAAYC,aAAaC,QAAQ,gBAAkB,eAAgB,yBACzIC,MAAK,SAAAC,GACF9B,QAAQC,IAAI,+BACZ0B,aAAagN,QAAQ,kBAAmB7M,EAAI3B,KAAKmJ,iBACjD,EAAK/E,SAAS,CACZ+E,gBAAkBxH,EAAI3B,KAAKmJ,gBAC3BoF,WAAY,OAGjB1M,OAAM,SAAAC,GAAQ,EAAKsC,SAAS,CAACmK,WAAY,IAAS1O,QAAQwC,MAAMP,OAhCpD,EAmCnBsK,iBAAmB,SAACjK,GAChB,EAAKiC,SAAS,CAACkK,aAAenM,EAAE+C,OAAOmH,MAAM,MAlC7C,EAAK1M,MAAQ,CACT2O,kBAAevK,EACfoF,gBAAkB3H,aAAaC,QAAQ,mBACvC8M,WAAY,GAGhB,EAAKnC,iBAAmB,EAAKA,iBAAiBjG,KAAtB,gBART,E,sEAuCf,OAEI,yBAAKI,UAAU,aAGX,yBAAKA,UAAU,4BACX,kBAAC,EAAD,OAEJ,yBAAKA,UAAU,4BAEX,kBAAC,EAAD,CAAUkI,QAAS/H,KAAK3D,MAAM0L,WAIlC,yBAAKlI,UAAU,kCACf,kBAACmI,EAAA,EAAD,CAAOnI,UAAU,kBAAkB6C,IAAO1C,KAAK/G,MAAMwJ,gBAAiBgE,MAAO,IAAKD,OAAQ,IAAKyB,eAAa,IAC5G,0BAAMvB,SAAU1G,KAAK2H,qBAAsB9H,UAAU,qBAErD,2BAAOxG,KAAK,OAAOmG,KAAK,OAAOK,UAAU,2BAA2BiB,SAAUd,KAAK0F,iBAAkB3E,YAAY,2BAFjH,IAE6I,4BAC7I,2BAAO1H,KAAK,SAASwG,UAAU,yBAAyBpB,MAAQuB,KAAK/G,MAAM4O,UAAuC,qBAA3B,yBAAiDf,SAAU9G,KAAK/G,MAAM4O,aAI7J,uCACY/M,aAAaqE,WADzB,IACsCrE,aAAasE,UAAU,4BAD7D,WAEatE,aAAaoN,MAAM,4BAFhC,YAGcpN,aAAaqN,OAAO,mC,GApExBd,IAAMlG,WA6EjBiH,cAAWZ,G,4GCvEXa,G,2MAdXZ,iBAAmB,SAACC,GAChB,YAAcrK,IAAPqK,GAA2B,KAAPA,GAAkB,OAALA,EAAY,qBAAuBrN,yBAA0CqN,G,wEAIrH,OACI,yBAAK7H,UAAU,yBACX,yBAAKA,UAAU,8BAA8B6C,IAAK1C,KAAKyH,iBAAiBzH,KAAK3D,MAAMoG,iBAAkB+D,OAAQ,GAAIC,MAAO,GAAI7D,IAAI,KADpI,aACwJ5C,KAAK3D,MAAM8C,WADnK,IACgLa,KAAK3D,MAAM+C,e,GAT1KiI,IAAMlG,WCO7B/G,GAAQ,UAAMC,0BAEdiO,G,YAEF,WAAYjM,GAAQ,IAAD,8BACf,4CAAMA,KAmBVX,OAAS,WACLpB,EAAYoB,SACZvD,OAAO2C,aAAaS,WAAW,YAC/BpD,OAAO2C,aAAaS,WAAW,cAC/BpD,OAAO2C,aAAaS,WAAW,aAC/BpD,OAAO2C,aAAaS,WAAW,gBAC/BpD,OAAOC,SAASmQ,KAAO,KA1BR,EA6BnBC,aAAe,WACX,EAAKnM,MAAM0L,QAAQpL,KAAK,UA9BT,EAiCnB8L,YAAc,SAAChN,GACXtC,QAAQC,IAAI,QACZ,EAAKsE,SAAS,CACVc,OAAQ/C,EAAE+C,OACVkK,UAAU,KArCC,EAwCnBC,mBAAqB,SAAClN,GAClBtC,QAAQC,IAAIqC,EAAE+C,OAAOC,OACrB,EAAKf,SAAS,CACVkL,aAAcnN,EAAE+C,OAAOC,MACvBD,OAAQ/C,EAAE+C,UA5CC,EAgDnBiJ,iBAAmB,SAACC,GAChB,MAAO,yBAA2BA,GAjDnB,EAoDnBmB,gBAAkB,SAAC5M,GACf,EAAKyB,SAAS,CACVgL,UAAW,IAEf,EAAKrM,MAAM0L,QAAQpL,KAAK,YAAYV,IAxDrB,EA0DnB6M,qBAAuBzK,qBAAS,WAE5BlF,QAAQC,IAAI,aACoBiE,IAA5B,EAAKpE,MAAM2P,cAA8B,EAAK3P,MAAM2P,aAAarP,OAAS,GAC9EmB,IACKC,IADL,UACYP,GADZ,wBACoC,EAAKnB,MAAM2P,cAAgB,CACvDhO,QAAU,CAACC,cAAgB,UAAYC,aAAaC,QAAQ,mBAE/DC,MAAK,SAAAC,GACF9B,QAAQ+B,IAAI,EAAKjC,MAAMuF,OAAOgB,MAC1BvE,EAAI3B,KAAKC,OAAS,GACtB,EAAKmE,SAAS,CACV5E,MAAOmC,EAAI3B,KACXoP,UAAU,OAIjBvN,OAAM,SAAAC,GAAG,OAAIjC,QAAQwC,MAAMP,QACjC,KA5EgB,EA8EnB2N,UAAY,SAACtN,KA9EM,EAkFnBuN,kBAAoB,SAACvN,GACjB,EAAKiC,SAAS,CACVkL,aAAcnN,EAAE+C,OAAOC,MACvBD,OAAQ/C,EAAE+C,SAEd,EAAKsK,wBArFL,EAAKG,IAAM5B,IAAM6B,YACjB,EAAKjQ,MAAQ,CACTyP,UAAU,EACVlK,YAAQnB,EACRuL,aAAc,GACd9P,MAAO,IAGX,EAAKkQ,kBAAoB,EAAKA,kBAAkBvJ,KAAvB,gBAVV,E,kFAcftG,QAAQC,IAAI,wBACR4G,KAAK3D,MAAM8M,WACXnJ,KAAK3D,MAAM0L,QAAQpL,KAAK,CAACyM,SAAW,WAAYnQ,MAAQ,CAACoQ,IAAM,SAAU,CAAC7J,KAAO,MAAOvG,MAAQ,CAACoQ,IAAM,Y,+BA2ErG,IAAD,OACL,OAAOrJ,KAAK3D,MAAM8M,UAAY,KAC1B,yBAAKtJ,UAAU,oCACX,yBAAKA,UAAU,uCACX,kBAACyJ,EAAA,EAAD,CAAQC,OAAO,KAAKC,GAAG,SACnB,kBAACF,EAAA,EAAOG,MAAR,KACI,yBAAK/G,IAAI,4BAA4B8D,OAAQ,GAAIC,MAAO,GAAI7D,IAAI,mBAEpE,kBAAC0G,EAAA,EAAOI,OAAR,CAAevJ,gBAAc,qBAC7B,kBAACmJ,EAAA,EAAOjJ,SAAR,KACI,kBAACsJ,GAAA,EAAD,CAAK9J,UAAU,WACX,kBAAC,IAAD,CAASvB,GAAG,SAAZ,SAEJ,kBAACsL,GAAA,EAAD,CAAMC,QAAM,GACR,kBAACC,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CACIhJ,YAAY,WACZiJ,aAAW,WACXxK,KAAK,eACLsB,SAAUd,KAAKgJ,kBACfvK,MAAOuB,KAAK/G,MAAM2P,eAEtB,kBAACqB,GAAA,EAAD,CAAehB,IAAKjJ,KAAKiJ,KACrB,kBAACiB,GAAA,EAAD,CACIC,KAAMnK,KAAK/G,MAAMyP,SACjBlK,OAAQwB,KAAK/G,MAAMuF,OACnB4L,UAAU,SACVC,UAAWrK,KAAKiJ,IAAIqB,QACpBC,iBAAkB,IAElB,kBAACC,GAAA,EAAD,CAAS7Q,GAAG,qBACR,kBAAC6Q,GAAA,EAAQC,MAAT,CAAezD,GAAG,MAAlB,SACA,kBAACwD,GAAA,EAAQE,QAAT,CAAiB7K,UAAU,aACvB,6BAAOG,KAAK/G,MAAMH,MAAM2D,KAAI,SAAAkD,GAAI,OAChC,yBAAKE,UAAU,wBAAwBK,QAAS,WAAK,EAAK2I,gBAAgBlJ,EAAK1D,YAAY,kBAAC,GAAD,CAAgBgE,IAAKN,EAAK1D,SAAUkD,WAAYQ,EAAKR,WAAYC,UAAWO,EAAKP,UAAWqD,gBAAiB9C,EAAK8C,kBAA7M,eAcxB,kBAACkI,GAAA,EAAD,CAAaC,MAAOzS,OAAO2C,aAAamB,SAAUtC,GAAG,gBACjD,kBAACgR,GAAA,EAAYE,KAAb,CAAkBC,SAAS,MAAM5K,QAASF,KAAKtE,QAA/C,WACA,kBAACiP,GAAA,EAAYI,QAAb,MACA,kBAACJ,GAAA,EAAYE,KAAb,CAAkBC,SAAS,MAAM5K,QAASF,KAAKwI,cAA/C,yB,GAhJRnB,IAAMlG,WA4JfiH,eAAWE,I,yBC9JpB0C,G,YAEF,WAAY3O,GAAQ,IAAD,8BACf,4CAAMA,KAUVkC,kBAAoB,SAAC0M,GACjB,EAAKvN,SAAL,eACKuN,EAAMzM,OAAOgB,KAAOyL,EAAMzM,OAAOC,SAbvB,EAuBnByM,MAAQ,SAAOzP,GAAP,eAAAjB,EAAAC,OAAA,uDACJ,EAAKiD,SAAS,CACVyN,SAAS,IAEb1P,EAAEwJ,iBACF9L,QAAQ+B,IAAI,EAAKjC,OALb,WAAAuB,EAAA,MAMmB4Q,KAAaF,MAAM,EAAKjS,QAN3C,QAMEoC,EANF,QAOSgQ,cACTlT,OAAO2C,aAAagN,QAAQ,eAAgBzM,EAASgQ,cACrDlT,OAAO2C,aAAagN,QAAQ,WAAYzM,EAASiQ,WAAWrP,UAC5D9D,OAAO2C,aAAagN,QAAQ,aAAczM,EAASiQ,WAAWnM,YAC9DhH,OAAO2C,aAAagN,QAAQ,YAAazM,EAASiQ,WAAWlM,WAC7DjH,OAAO2C,aAAagN,QAAQ,QAASzM,EAASiQ,WAAWpD,OACzD/P,OAAO2C,aAAagN,QAAQ,kBAAmBzM,EAASiQ,WAAW7I,iBACnEtK,OAAO2C,aAAagN,QAAQ,SAAUzM,EAASiQ,WAAWnD,QAG1DhQ,OAAOC,SAASmQ,KAAO,MAEvB,EAAK7K,SAAU,CACX6N,aAAelQ,EAAS2B,UAE5B,EAAKU,SAAS,CACVyN,SAAS,KAvBb,sCArBJ,EAAKlS,MAAQ,CACTgD,SAAU,GACVuP,SAAU,GACVL,SAAS,EACTI,aAAe,IAEnB,EAAKhN,kBAAoB,EAAKA,kBAAkBkB,KAAvB,gBARV,E,kFAkB6B,MAAxC3E,aAAaC,QAAQ,iBACrBiF,KAAK3D,MAAM0L,QAAQpL,KAAK,O,+BAiC5B,OACI,yBAAKkD,UAAU,WACX,yBAAKA,UAAU,0CACX,yBAAKA,UAAU,wBACX,yBAAK6C,IAAI,4BAA4B7C,UAAU,aAAa+C,IAAI,UAEpE,yBAAK/C,UAAU,aACX,yBAAKA,UAAU,IACX,0BAAMA,UAAU,4BAA4B6G,SAAU1G,KAAKkL,OACvD,yBAAKrL,UAAU,oBAEX,yBAAKA,UAAU,mBAAmBG,KAAK/G,MAAMsS,cAE7C,yBAAK1L,UAAU,sBACX,0BAAMA,UAAU,0BAAyB,kBAAC,IAAD,CAAiBmB,KAAMyK,IAAQvK,MAAM,YAElF,2BAAO7H,KAAK,OAAOmG,KAAK,WAAWK,UAAU,0BAA0BkB,YAAY,WAAWD,SAAUd,KAAKzB,qBAGjH,yBAAKsB,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAA0B,kBAAC,IAAD,CAAiBmB,KAAM0K,IAAOxK,MAAM,YAElF,2BAAO7H,KAAK,WAAWmG,KAAK,WAAWK,UAAU,0BAA0BiB,SAAUd,KAAKzB,kBAAmBwC,YAAY,cAG7H,yBAAKlB,UAAU,eACX,kBAACgH,EAAA,EAAD,CAAQ8E,QAAQ,UAAU9L,UAAU,+DAA+DiH,SAAU9G,KAAK/G,MAAMkS,QAASjL,QAASF,KAAKkL,OAC1IlL,KAAK/G,MAAMkS,QAAU,kBAACpE,EAAA,EAAD,CAClBC,GAAG,OACHC,UAAU,OACVC,KAAK,KACLC,KAAK,SACLC,cAAY,SACX,KACJpH,KAAK/G,MAAMkS,QAAU,+CAA6B,0CAM/D,yBAAKtL,UAAU,eAAf,0BAC2B,kBAAC,IAAD,CAAMvB,GAAG,WAAT,WAD3B,IAC6D,4BACzD,kBAAC,IAAD,CAAMA,GAAG,WAAT,kC,GAjGZ+I,IAAMlG,WA4GXiH,eAAW4C,IC4BXY,I,mBAvIX,WAAYvP,GAAQ,IAAD,8BACf,4CAAMA,KAeVkC,kBAAoB,SAAC0M,GACjB,EAAKvN,SAAL,eACKuN,EAAMzM,OAAOgB,KAAOyL,EAAMzM,OAAOC,SAlBvB,EAsBnBoN,OAAS,SAAOpQ,GAAP,eAAAjB,EAAAC,OAAA,uDACLtB,QAAQ+B,IAAI,EAAKjC,OACjB,EAAKyE,SAAS,CACVyN,SAAS,IAHR,WAAA3Q,EAAA,MAKkB4Q,KAAaU,OAAO,EAAK7S,QAL3C,OAKCoC,EALD,OAMLlC,QAAQ+B,IAAIG,GACRA,EAAS0Q,YACT,EAAKrO,SAAS,CAACsO,eAAe,CAACD,YAAa,EAAM/O,QAAU,sBAC5D,EAAKU,SAAS,CACVzB,SAAU,GACVuP,SAAU,GACVS,UAAW,GACX9M,WAAY,GACZC,UAAW,GACX+I,OAAQ,GACRD,MAAO,MAGX,EAAKxK,SAAS,CAACsO,eAAe,CAACD,YAAa,EAAO/O,QAAU3B,EAAS2B,WAE1E,EAAKU,SAAS,CACVyN,SAAS,IAtBR,sCApBL,EAAKlS,MAAQ,CACTgD,SAAU,GACVuP,SAAU,GACVS,UAAW,GACX9M,WAAY,GACZC,UAAW,GACX+I,OAAQ,GACRD,MAAO,GACPiD,SAAU,EACVa,eAAiB,CAACD,YAAa,EAAO/O,QAAQ,KAElD,EAAKuB,kBAAoB,EAAKA,kBAAkBkB,KAAvB,gBAbV,E,sEAiDf,OACI,yBAAKI,UAAU,WACX,yBAAKA,UAAU,2CACX,yBAAKA,UAAU,wBACX,yBAAK6C,IAAI,4BAA4B7C,UAAU,aAAa+C,IAAI,UAEpE,yBAAK/C,UAAU,cACX,yBAAKA,UAAU,IACX,0BAAMA,UAAU,8BACZ,yBAAKA,UAAU,YACVG,KAAK/G,MAAM+S,eAAehP,SAE/B,yBAAK6C,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAAyB,kBAAC,IAAD,CAAiBmB,KAAMyK,IAAQvK,MAAM,YAElF,2BAAO7H,KAAK,OAAOmG,KAAK,WAAWK,UAAU,0BAA0BpB,MAAOuB,KAAK/G,MAAMgD,SAAU8E,YAAY,WAAWD,SAAUd,KAAKzB,qBAE7I,yBAAKsB,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAAyB,kBAAC,IAAD,CAAiBmB,KAAMyK,IAAQvK,MAAM,YAElF,2BAAO7H,KAAK,OAAOmG,KAAK,aAAaK,UAAU,0BAA0BpB,MAAOuB,KAAK/G,MAAMkG,WAAY4B,YAAY,aAAaD,SAAUd,KAAKzB,qBAEnJ,yBAAKsB,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAAyB,kBAAC,IAAD,CAAiBmB,KAAMyK,IAAQvK,MAAM,YAElF,2BAAO7H,KAAK,OAAOmG,KAAK,YAAYK,UAAU,0BAA0BkB,YAAY,YAAYtC,MAAOuB,KAAK/G,MAAMmG,UAAW0B,SAAUd,KAAKzB,qBAEhJ,yBAAKsB,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAAyB,kBAAC,IAAD,CAAiBmB,KAAMkL,IAAYhL,MAAM,YAEtF,2BAAO7H,KAAK,QAAQmG,KAAK,QAAQK,UAAU,0BAA0BkB,YAAY,gBAAgBtC,MAAOuB,KAAK/G,MAAMiP,MAAOpH,SAAUd,KAAKzB,qBAE7I,yBAAKsB,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAAyB,kBAAC,IAAD,CAAiBmB,KAAMyK,IAAQvK,MAAM,YAElF,4BAAQ1B,KAAK,SAASK,UAAU,0BAA0BpB,MAAOuB,KAAK/G,MAAMkP,OAAQrH,SAAUd,KAAKzB,mBAC/F,4BAAQE,MAAM,IAAd,yBACA,4BAAQA,MAAM,QAAd,UACA,4BAAQA,MAAM,UAAd,YAIR,yBAAKoB,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAA0B,kBAAC,IAAD,CAAiBmB,KAAM0K,IAAOxK,MAAM,YAElF,2BAAO7H,KAAK,WAAWmG,KAAK,WAAWK,UAAU,0BAA0BpB,MAAOuB,KAAK/G,MAAMuS,SAAU1K,SAAUd,KAAKzB,kBAAmBwC,YAAY,cAGzJ,yBAAKlB,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAA0B,kBAAC,IAAD,CAAiBmB,KAAM0K,IAAOxK,MAAM,YAElF,2BAAO7H,KAAK,WAAWmG,KAAK,YAAYK,UAAU,0BAA0BpB,MAAOuB,KAAK/G,MAAMgT,UAAWnL,SAAUd,KAAKzB,kBAAmBwC,YAAY,sBAE3J,yBAAKlB,UAAU,eACX,kBAACgH,EAAA,EAAD,CAAQ3G,QAASF,KAAK6L,OAAQhM,UAAU,iEACvCG,KAAK/G,MAAMkS,QAAU,kBAACpE,EAAA,EAAD,CACdC,GAAG,OACHC,UAAU,OACVC,KAAK,KACLC,KAAK,SACLC,cAAY,SACX,KACJpH,KAAK/G,MAAMkS,QAAU,qDAAmC,2CAKrE,yBAAKtL,UAAU,eAAf,4BAC6B,kBAAC,IAAD,CAAMvB,GAAG,UAAT,WAD7B,IAC8D,qC,GA9HrE+I,IAAMlG,YCArBgL,I,mBAEF,WAAY9P,GAAQ,IAAD,8BACf,4CAAMA,KAoBV+P,mBAAqB,WACjB1R,IACKC,IADL,UA1BSN,yBA0BT,WAC+B,CAAEO,QAAS,CAAEC,cAAe,UAAYC,aAAaC,QAAQ,mBACvFC,MAAK,SAAAC,GAAG,OAAI,EAAKoR,mBAAmBpR,EAAI3B,SACxC6B,OAAM,SAAAC,GAAG,OAAIjC,QAAQwC,MAAMP,OAzBjB,EA4BnBiR,mBAAqB,SAAC/S,GAAU,IACpB2C,EAAoE3C,EAApE2C,SAAUkD,EAA0D7F,EAA1D6F,WAAYC,EAA8C9F,EAA9C8F,UAAW+I,EAAmC7O,EAAnC6O,OAAQD,EAA2B5O,EAA3B4O,MAAOzF,EAAoBnJ,EAApBmJ,gBACxD,EAAK/E,UAAS,WACV,MAAO,CACHzB,WAAUkD,aAAYC,YAAW+I,SAAQD,QAAOzF,sBAErD,kBAAMtJ,QAAQC,IAAI,aAlCN,EAqCnBmF,kBAAoB,SAAC9C,GACjB,EAAKiC,SAAL,eACKjC,EAAE+C,OAAOgB,KAAO/D,EAAE+C,OAAOC,SAvCf,EA2CnB6N,sBAAwB,WACpB,IAAI,EAAKrT,MAAMkS,QAAf,CACA,EAAKzN,SAAS,CACV6O,kBAAmB,GACnBhB,aAAc,GACdJ,SAAU,IALY,MAOyB,EAAKlS,MAAhDiP,EAPkB,EAOlBA,MAAOsD,EAPW,EAOXA,SAAUrM,EAPC,EAODA,WAAYC,EAPX,EAOWA,UACrC1E,IACKoB,KADL,UAvDSzB,yBAuDT,kBACuC,CAAE6N,QAAOsD,WAAUrM,aAAYC,aAAa,CAC3ExE,QACI,CAAEC,cAAe,UAAYC,aAAaC,QAAQ,mBAEzDC,MAAK,SAAAC,GAAQ,IAEF+B,EADS/B,EAAT3B,KACA0D,QACR7D,QAAQC,IAAI4D,GACZ,EAAKU,SAAS,CAAE6O,kBAAmBvP,EAASmO,SAAU,OAEzDhQ,OAAM,SAAAC,GACHjC,QAAQwC,MAAMP,GADJ,IAEFC,EAAaD,EAAbC,SACRlC,QAAQ+B,IAAIG,GAHF,IAIFC,EAAiBD,EAAjBC,OAAQhC,EAAS+B,EAAT/B,KACD,MAAXgC,IACAR,aAAaS,WAAW,gBACxBpD,OAAOC,SAASoD,QAAQ,WAE5B,EAAKkC,SAAS,CAAE6N,aAAcjS,EAAK0D,QAASmO,SAAU,SAvE/C,EA2EnBqB,mBAAqB,WACjB,IAAI,EAAKvT,MAAMkS,QAAf,CACA,EAAKzN,SAAS,CACV6O,kBAAmB,GACnBhB,aAAc,GACdJ,SAAU,IALS,MAOmB,EAAKlS,MAAvCwT,EAPe,EAOfA,gBAAiBC,EAPF,EAOEA,aACzBhS,IACKoB,KADL,UAvFSzB,yBAuFT,mBACwC,CAAEoS,kBAAiBE,YAAcD,GAAgB,CACjF9R,QACI,CAAEC,cAAe,UAAYC,aAAaC,QAAQ,mBAEzDC,MAAK,SAAAC,GAAQ,IAEF+B,EADS/B,EAAT3B,KACA0D,QACR7D,QAAQC,IAAI4D,GACZ,EAAKU,SAAS,CAAE6O,kBAAmBvP,EAASmO,SAAU,OAEzDhQ,OAAM,SAAAC,GACHjC,QAAQwC,MAAMP,GADJ,IAEFC,EAAaD,EAAbC,SACRlC,QAAQ+B,IAAIG,GAHF,IAIFC,EAAiBD,EAAjBC,OAAQhC,EAAS+B,EAAT/B,KACD,MAAXgC,IACAR,aAAaS,WAAW,gBACxBpD,OAAOC,SAASoD,QAAQ,WAE5B,EAAKkC,SAAS,CAAE6N,aAAcjS,EAAK0D,QAASmO,SAAU,SArG9D,EAAKlS,MAAQ,CACT+D,QAAS,GACTf,SAAU,GACVkD,WAAY,GACZC,UAAW,GACX8I,MAAO,GACPC,OAAQ,GACR1F,gBAAiB,GACjBiK,aAAc,aACdE,aAAc,SACdH,gBAAiB,iBACjBF,kBAAmB,GACnBhB,aAAc,GACdJ,SAAU,GAGd,EAAKiB,qBAlBU,E,sEA2Gf,OACI,yBAAKvM,UAAU,4CAEX,kBAACD,EAAA,EAAD,KACI,kBAACA,EAAA,EAAKE,OAAN,yBACA,kBAACF,EAAA,EAAKG,KAAN,mCAEG,0BAAMF,UAAU,IACX,yBAAKA,UAAU,YACVG,KAAK/G,MAAMsS,cAEhB,yBAAK1L,UAAU,cACVG,KAAK/G,MAAMsT,mBAEhB,yBAAK1M,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAAyB,kBAAC,IAAD,CAAiBmB,KAAMyK,IAAQvK,MAAM,YAElF,2BAAO7H,KAAK,OAAOmG,KAAK,WAAWsH,UAAQ,EAACjH,UAAU,0BAA0BpB,MAAOuB,KAAK/G,MAAMgD,SAAU8E,YAAY,WAAWD,SAAUd,KAAKzB,qBAEtJ,yBAAKsB,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAAyB,kBAAC,IAAD,CAAiBmB,KAAMyK,IAAQvK,MAAM,YAElF,2BAAO7H,KAAK,OAAOmG,KAAK,aAAaK,UAAU,0BAA0BpB,MAAOuB,KAAK/G,MAAMkG,WAAY4B,YAAY,aAAaD,SAAUd,KAAKzB,qBAEnJ,yBAAKsB,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAAyB,kBAAC,IAAD,CAAiBmB,KAAMyK,IAAQvK,MAAM,YAElF,2BAAO7H,KAAK,OAAOmG,KAAK,YAAYK,UAAU,0BAA0BkB,YAAY,YAAYtC,MAAOuB,KAAK/G,MAAMmG,UAAW0B,SAAUd,KAAKzB,qBAEhJ,yBAAKsB,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAAyB,kBAAC,IAAD,CAAiBmB,KAAMkL,IAAYhL,MAAM,YAEtF,2BAAO7H,KAAK,QAAQmG,KAAK,QAAQK,UAAU,0BAA0BkB,YAAY,gBAAgBtC,MAAOuB,KAAK/G,MAAMiP,MAAOpH,SAAUd,KAAKzB,qBAE7I,yBAAKsB,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAAyB,kBAAC,IAAD,CAAiBmB,KAAMyK,IAAQvK,MAAM,YAElF,4BAAQ1B,KAAK,SAASsH,UAAQ,EAACjH,UAAU,0BAA0BpB,MAAOuB,KAAK/G,MAAMkP,OAAQrH,SAAUd,KAAKzB,mBACxG,4BAAQE,MAAM,IAAd,yBACA,4BAAQA,MAAM,QAAd,UACA,4BAAQA,MAAM,UAAd,YAIR,yBAAKoB,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAA0B,kBAAC,IAAD,CAAiBmB,KAAM0K,IAAOxK,MAAM,YAElF,2BAAO7H,KAAK,WAAWmG,KAAK,WAAWK,UAAU,0BAA0BpB,MAAOuB,KAAK/G,MAAMuS,SAAU1K,SAAUd,KAAKzB,kBAAmBwC,YAAY,sBAGzJ,yBAAKlB,UAAU,eACX,kBAACgH,EAAA,EAAD,CAAQ3G,QAASF,KAAKsM,sBAAuBzM,UAAU,iEAClDG,KAAK/G,MAAMkS,QAAU,kBAACpE,EAAA,EAAD,CAClBC,GAAG,OACHC,UAAU,OACVC,KAAK,KACLC,KAAK,SACLC,cAAY,SACX,KACJpH,KAAK/G,MAAMkS,QAAU,8DAA4C,4DAM9E,4BACA,gDAA0B,4BAC1B,yBAAKtL,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAA0B,kBAAC,IAAD,CAAiBmB,KAAM0K,IAAOxK,MAAM,YAElF,2BAAO7H,KAAK,WAAWmG,KAAK,kBAAkBK,UAAU,0BAA0BpB,MAAOuB,KAAK/G,MAAMwT,gBAAiB3L,SAAUd,KAAKzB,kBAAmBwC,YAAY,sBAGvK,yBAAKlB,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAA0B,kBAAC,IAAD,CAAiBmB,KAAM0K,IAAOxK,MAAM,YAElF,2BAAO7H,KAAK,WAAWmG,KAAK,eAAeK,UAAU,0BAA0BpB,MAAOuB,KAAK/G,MAAMyT,aAAc5L,SAAUd,KAAKzB,kBAAmBwC,YAAY,kBAEjK,yBAAKlB,UAAU,oBACX,yBAAKA,UAAU,sBACX,0BAAMA,UAAU,0BAA0B,kBAAC,IAAD,CAAiBmB,KAAM0K,IAAOxK,MAAM,YAElF,2BAAO7H,KAAK,WAAWmG,KAAK,eAAeK,UAAU,0BAA0BpB,MAAOuB,KAAK/G,MAAM2T,aAAc9L,SAAUd,KAAKzB,kBAAmBwC,YAAY,0BAEjK,yBAAKlB,UAAU,eACX,kBAACgH,EAAA,EAAD,CAAQ3G,QAASF,KAAKwM,mBAAoB3M,UAAU,iEAC/CG,KAAK/G,MAAMkS,QAAU,kBAACpE,EAAA,EAAD,CAClBC,GAAG,OACHC,UAAU,OACVC,KAAK,KACLC,KAAK,SACLC,cAAY,SACX,KACJpH,KAAK/G,MAAMkS,QAAU,8DAA4C,0D,GAlN3E9D,IAAMlG,YA+NdiH,eAAW+D,I,UCjOpBU,I,mBAEF,WAAYxQ,GAAQ,IAAD,uBACf,4CAAMA,KA8BVoL,iBAAmB,SAACC,GAChB,YAAcrK,IAAPqK,GAA2B,KAAPA,GAAkB,OAALA,EAAY,qBAAuBA,GA9B3EvO,QAAQ+B,IAAImB,EAAM/D,MAAMwU,QACnBzQ,EAAM/D,MAAMwU,OAAO7Q,UACpB9D,OAAOC,SAASmQ,KAAK,KAEzB,EAAKtP,MAAQ,CACT8T,SAAU,GACV5B,SAAS,GAEb,IAAMlP,EAAWI,EAAM/D,MAAMwU,OAAO7Q,SAVrB,OAWfvB,IACKC,IADL,UAfSN,yBAeT,qBACiC4B,GAAY,CACrCrB,QAAU,CAACC,cAAgB,UAAYC,aAAaC,QAAQ,mBAE/DC,MAAK,SAAAC,GACF,EAAKyC,SAAS,CACVqP,SAAU9R,EAAI3B,KACd6R,SAAS,OAGhBhQ,OAAM,SAAAC,GACHjC,QAAQwC,MAAMP,GACd,EAAKsC,SAAS,CACVyN,SAAS,IAEb,EAAK9O,MAAM0L,QAAQpL,KAAK,QA1BjB,E,sEAuCf,OACIqD,KAAK/G,MAAMkS,QAAU,wCAEjB,yBAAKtL,UAAU,oBACX,yBAAKA,UAAU,+BACX,kBAACmI,EAAA,EAAD,CAAOtF,IAAO1C,KAAKyH,iBAAiBzH,KAAK/G,MAAM8T,SAAStK,iBAAkBgE,MAAO,IAAKD,OAAQ,IAAKyB,eAAa,KAGpH,yBAAKpI,UAAU,yBACX,kBAACmN,GAAA,EAAD,CAAOrJ,YAAU,GACb,2BAAOsJ,SAAO,GACV,4BACI,wCACA,4BAAKjN,KAAK/G,MAAM8T,SAAS9Q,WAE7B,4BACI,0CACA,4BAAK+D,KAAK/G,MAAM8T,SAAS5N,aAE7B,4BACI,yCACA,4BAAKa,KAAK/G,MAAM8T,SAAS3N,YAE7B,4BACI,sCACA,4BAAKY,KAAK/G,MAAM8T,SAAS5E,SAE7B,4BACI,6CACA,4BAAKnI,KAAK/G,MAAM8T,SAAS7E,gB,GAtEnCb,IAAMlG,YAkFjBiH,eAAWyE,IC5CXK,G,iLA9BP,OAEI,yBAAKrN,UAAU,wBAEX,kBAAC,IAAD,KACA,kBAAC,GAAD,CAAWsJ,UAAWnJ,KAAK3D,MAAM8M,YACrB,kBAAC,IAAD,KACA,kBAAC,IAAD,CAAOgE,OAAK,EAACC,KAAK,IAAIC,UAAW7F,IACjC,kBAAC,IAAD,CAAO4F,KAAK,SAASC,UAAWrC,KAChC,kBAAC,IAAD,CAAOoC,KAAK,UAAUC,UAAWzB,KACjC,kBAAC,IAAD,CAAOwB,KAAK,QAAQC,UAAWlB,KAC/B,kBAAC,IAAD,CAAOiB,KAAK,qBAAqBC,UAAWR,KAC5C,kBAAC,IAAD,CAAOQ,UAAW7F,MAI9B,yBAAK3H,UAAU,iB,GAnBZwH,IAAMlG,W,OCHzBhI,QAAQ+B,IAAIb,0BACZlB,QAAQ+B,IAAIb,kEACZ,IAAM8O,GAA4D,MAA/ChR,OAAO2C,aAAaC,QAAQ,gBAE/CuS,IAASC,OACT,kBAAC,IAAD,CAAqBvT,MAAOA,GACxB,kBAAC,GAAD,CAAMmP,UAAWA,MAEnBvL,SAASC,eAAe,SlBkHpB,kBAAmBmI,WACrBA,UAAUwH,cAAcC,MAAMzS,MAAK,SAAA0S,GACjCA,EAAaC,iB,mGmBlIbC,EAAS,UAAMvT,yBAAN,mCACTwT,EAAU,UAAMxT,yBAAN,UAoDVyT,EAAuC,WAEzC,MADsB,SAAY,IAAIC,EAAJ,UApDpB,OAoDoB,YAnDhB,aAmD4D7K,SAAS,WAK5E,KAAEgI,MArDH,SAAO8C,GAAP,iBAAAxT,EAAAC,OAAA,gEAENuT,EAAUC,WAAa,WACvB9U,QAAQC,IAAI,cAAgBQ,KAAKC,UAAUmU,IAHrC,WAAAxT,EAAA,MAIeE,IAAMoB,KAAK8R,EAAWM,IAAYrU,UAAUmU,GAAY,CACzEpT,QAAS,CACL,eAAgB,oCAChB,cAAiBkT,QAPnB,cAIFzS,EAJE,yBAUCA,EAAS/B,MAVV,uCAaNH,QAAQ+B,IAAI,KAAEG,UACdlC,QAAQC,IAAI,yBAA2B,KAAEiC,UACrC2B,EAAU,GAEVA,EADA,KAAE3B,UAAY,KAAEA,SAAS/B,KACd,KAAE+B,SAAS/B,KAAK6U,mBAAqB,KAAE9S,SAAS/B,KAAK6U,kBAAkBxL,SAAS,oBAAuB,sBAAwB,KAAEtH,SAAS/B,KAAK0D,QACnJ,KAAErB,MACC,KAAEA,MArBM,uDAEhB,kBAuBC,CAACqB,QAAUA,IAvBZ,yDAqDU8O,OA1BT,SAAOsC,GAAP,eAAA5T,EAAAC,OAAA,gEAEPtB,QAAQC,IAAI,cAAgBQ,KAAKC,UAAUuU,IAFpC,WAAA5T,EAAA,MAGDE,IAAMoB,KAAK+R,EAAYO,IAHtB,gCAIA,CAACrC,YAAa,IAJd,uCAMP5S,QAAQ+B,IAAI,KAAEG,UACdlC,QAAQC,IAAI,+BACR4D,EAAU,GAEVA,EADA,KAAE3B,UAAY,KAAEA,SAAS/B,KACf,KAAE+B,SAAS/B,KAAK0D,QACnB,KAAErB,MACC,KAAEA,MAzCM,uDA6Bf,kBAgBA,CAACqB,QAAUA,IAhBX,4D","file":"static/js/main.b3ae36fd.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","const stateInitial = {\n    posts: [],\n    currentPostId: null,\n    comments: [],\n    loadingPosts: false,\n    lastId: 0,\n    loadingUsers: false,\n    users: [],\n    loggedInUserInfo: {}\n}\n\nconst reducer = (state = stateInitial, action) => {\n    console.log(action.type)\n    switch (action.type) {\n        case (\"RECEIVE_POSTS\"):\n            if (action.data.length > 0) {\n                return Object.assign({}, state, { posts: state.posts.concat(action.data), lastId: action.data[(action.data.length - 1)].id, loadingPosts: false });\n            }\n            return Object.assign({}, state, { posts: state.posts.concat(action.data), loadingPosts: false });\n        case (\"SET_ABOUT_TO_LOAD_POST_TRUE\"):\n            console.log('updating loading post status to true');\n            return Object.assign({}, state, { loadingPosts: true });\n        case (\"DONE_LOADING_POSTS\"):\n            console.log('updating loading post status to false');\n            return Object.assign({}, state, { loadingPosts: false });\n        case (\"DONE_LOADING_USERS\"):\n            console.log('Done loading users');\n            return Object.assign({}, state, { loadingUsers: false });\n        case (\"LOADING_USERS\"):\n            console.log('Loading users');\n            return Object.assign({}, state, { loadingUsers: true });\n        case 'RECEIVE_USERS':\n            return Object.assign({}, state, { loadingUsers: false, users: action.data });\n        case 'SET_CURRENT_USER':\n            console.log(\"SETTING CURRENT USER \" + JSON.stringify(action.data));\n            return Object.assign({}, state, { loggedInUserInfo: action.data });\n        case 'RESET_LAST_ID':\n            return Object.assign({}, state, {lastId: 0});\n        case 'PREPEND_POST_FROM_LOGGED_IN_USER':\n            var currentPosts = state.posts;\n            currentPosts.unshift(action.data);\n            return Object.assign({}, state, {posts: currentPosts});\n        default:\n            console.log(\"In default\")\n            return state\n    }\n\n}\n\nexport default reducer;","import { createStore, applyMiddleware } from \"redux\";\nimport thunk from 'redux-thunk';\n\nimport reducer from './reducer';\n\nlet store = createStore(reducer, applyMiddleware(thunk));\n\nexport default store;","import axios from 'axios';\nconst BASE_URL = process.env.REACT_APP_SOCIAL_APP_BASE_URL;\n\nconst UserService = {\n\n    getMyLoggedInUserInfo : async () => {\n        try {\n            axios\n            .get(`${BASE_URL}my-info`, {\n                headers : {Authorization : `Bearer ${localStorage.getItem('access_token')}`}\n            }).then(res=> {\n                console.dir(res.data)\n                return res.data;\n            }).catch(err => {\n                console.log(\"Error occurred due to \", err);\n                if (err.response.status == 401) {\n                    localStorage.removeItem('access_token');\n                    window.location.replace('/login');\n                }\n            });\n        } catch(e) {\n            console.log(\"Error occurred due to \", e);\n        }\n        \n    },\n\n    logout : () => {\n        axios\n          .get(`${BASE_URL}logout`, {headers : {Authorization : `Bearer ${localStorage.getItem('access_token')}`}})\n          .then(res => {console.log(\"User successfully logged out\")})\n          .catch(err => console.error(err));\n    },\n\n    sendMessage : (messageObject) => {\n        axios\n          .post(`${BASE_URL}chat/send`, messageObject,{headers : {Authorization : `Bearer ${localStorage.getItem('access_token')}`}})\n          .then(res => console.log(res.data))\n          .catch(err => console.error(err));\n    },\n\n    loadChatForUser : (leastId, username, updateChat, firstOpening = false) => {\n        axios\n          .get(`${BASE_URL}chat/load-with-less-id/${leastId}/${username}`, {headers : {Authorization : `Bearer ${localStorage.getItem('access_token')}`}})\n          .then(res => {\n              console.log(res.data);\n              if (res.data.length > 0) {\n                  updateChat(username, res.data, firstOpening);\n              }\n          })\n          .catch(err => console.error(err));\n    }\n\n}\n\nexport default UserService;","import React, { Component } from 'react';\nimport { Card, Collapse } from 'react-bootstrap';\nimport './chat.css'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowRight } from '@fortawesome/free-solid-svg-icons';\nimport SocketIOClient from 'socket.io-client';\nimport UserService from './user-service';\nimport debounce from 'lodash.debounce';\n\nclass Users extends Component {\n\n    constructor(props) {\n        super(props);\n        this.userMap = new Map();\n        this.distinctUser = [];\n        this.state = {\n            open: false,\n            socketEndpointUrl: process.env.REACT_APP_SOCIAL_APP_BASE_URL,\n            onlineUsers: [],\n            currentUserChattingWith: '',\n            message: '',\n            chats: {},\n            loadingChat : false\n        };\n        this.socket = SocketIOClient(this.state.socketEndpointUrl);\n\n        this.socket.on('connection-received', () => {\n            this.socket.emit('join', { username: window.localStorage.username, first_name: window.localStorage.first_name, last_name: window.localStorage.last_name });\n        })\n\n        this.socket.on('all-users', data => {\n            this.distinctUser = [];\n            const map = new Map();\n            for (const item of data) {\n                if (window.localStorage.getItem('username') !== item.username && !map.has(item.username)) {\n                    map.set(item.username, true);\n                    this.distinctUser.push({\n                        username: item.username,\n                        name: item.name\n                    });\n\n                    if (this.state.chats[this.state.currentUserChattingWith] === undefined) {\n                        console.log(\"Setting chat empty array for user\");\n                        let newChats = Object.assign({}, this.state.chats, { [item.username]: [] });\n                        this.setState({\n                            chats: newChats\n                        });\n                    }\n                }\n            }\n            this.setState({\n                onlineUsers: this.distinctUser\n            })\n        });\n\n        this.openOrCloseChat = this.openOrCloseChat.bind(this);\n        this.sendMessage = this.sendMessage.bind(this);\n        this.handleInputChange = this.handleInputChange.bind(this);\n        this.socket.on('private-message-received', data => {\n            var elem = document.getElementById('bottomChatDiv');\n            elem.scrollTop = elem.scrollHeight;\n            console.log(\"Private message \" + JSON.stringify(data));\n            if (data.toUsername !== window.localStorage.getItem('username') || data.fromUsername !== window.localStorage.getItem('username')) {\n                const user = data.toUsername !== window.localStorage.getItem('username') ? data.toUsername : data.fromUsername;\n                var userMessage = this.state.chats[user];\n                userMessage = (userMessage === undefined) ? [] : userMessage;\n                userMessage.push(data);\n                let newChats = Object.assign({}, this.state.chats, { [user]: userMessage });\n                this.setState({\n                    chats: newChats\n                });\n                console.log(\"New chats \" + JSON.stringify(this.state.chats));\n            } else {\n                console.log(\"Sender and receiver match current logged in user\");\n            }\n\n\n        });\n    }\n\n    processRawChat = (rawChat) => {\n        const processedChat = [];\n        rawChat.map( chat=> {\n            processedChat.push({fromUsername : chat.sender, toUsername : chat.receiver, message : chat.content, id : chat.id});\n        });\n\n        return processedChat;\n    }\n\n    updateChat = (username, fetchedChat, firstOpening=false) => {\n        console.log(\"Updating chat\");\n        fetchedChat = this.processRawChat(fetchedChat);\n        var userMessage = this.state.chats[username];\n        userMessage = (userMessage === undefined) ? [] : userMessage;\n        var concatenatedChat = fetchedChat.concat(Array.from(userMessage));\n        let newChats = Object.assign({}, this.state.chats, { [username]: concatenatedChat });\n        this.setState({\n            chats: newChats,\n            loadingChat : false\n        });\n        if (firstOpening) {\n            document.getElementById('bottomChatDiv').scrollTop = document.getElementById('bottomChatDiv').scrollHeight;\n        } else { \n            document.getElementById('bottomChatDiv').scrollBy(0,200);\n        }\n    }\n    openOrCloseChat = (username) => {\n        console.log(\"Opening chat for \" + username);\n        this.setState({\n            currentUserChattingWith: username,\n            open: !this.state.open\n        });\n        var leastId = (this.state.chats[username] != undefined && this.state.chats[username].length > 0)\n         ? this.state.chats[username][0].id : 0;\n\n         if (this.state.loadingChat) {\n            return;\n        }\n\n        if (this.state.chats[username] == undefined || this.state.chats[username].length < 15) {\n            UserService.loadChatForUser(leastId, username, this.updateChat, true );\n        }\n\n        document.getElementById('bottomChatDiv').onscroll = debounce(() => {\n            if (document.getElementById('bottomChatDiv').scrollTop === 0) {\n                if (this.state.loadingChat) {\n                    return;\n                }\n                this.setState({loadingChat : true});\n                leastId = (this.state.chats[username] != undefined && this.state.chats[username].length > 0)\n                ? this.state.chats[username][0].id : 0;\n                console.log(\"Least id is \" + leastId);\n                UserService.loadChatForUser(leastId, username, this.updateChat );\n            }\n        }, 100);\n    }\n\n    sendMessage = () => {\n        if (this.state.message === undefined || this.state.message === '') { return; }\n        const messageObject = {\n            message: this.state.message,\n            to: this.state.currentUserChattingWith\n        };\n\n        // this.socket.emit('private-message-sent', messageObject);\n        UserService.sendMessage(messageObject);\n        this.setState({ message: '' });\n        document.getElementById('bottomChatDiv').scrollTop = document.getElementById('bottomChatDiv').scrollHeight;\n    }\n\n    handleInputChange = (e) => {\n        this.setState({\n            message: e.target.value\n        });\n    }\n    render() {\n        return (\n            <div>\n                <Card className='user-list-div'>\n                    <Card.Header>\n                        Available Users\n            </Card.Header>\n                    <Card.Body className='user-list-card-body'>\n                        {this.state.onlineUsers.map(user =>\n                            <div key={user.username} className='user-list-div' onClick={() => { this.openOrCloseChat(user.username) }} aria-controls=\"example-fade-text\"\n                                aria-expanded={this.state.open}>\n                                {/* <img src='image/logo.png' height={30} width={30} className='user-chat-image' alt='ImageAbsent' /> */}\n                                <span className='online-span'></span>\n                                {user.name}\n\n                            </div>\n                        )}\n                    </Card.Body>\n                </Card>\n                <Collapse in={this.state.open} className='collapse-view'>\n                    <div id=\"example-fade-text\">\n                        <div className=\"chat\">\n                            <div className=\"title\" onClick={()=>this.setState({open : false})}>{this.state.currentUserChattingWith}</div>\n                            <div className=\"bottomChatDiv text\" id='bottomChatDiv'>\n                                {this.state.currentUserChattingWith === '' ? null : this.state.chats[this.state.currentUserChattingWith].map(chat => <div style={{ marginBottom: '5px !important' }} >\n                                    {window.localStorage.getItem('username') === chat.fromUsername ? <div className='col-12' style={{ backgroundColor: '#e8e8e8', textAlign: 'right', borderRadius: '3px', display: 'block', marginTop: '5px' }}>\n                                        {chat.message}</div> :\n                                        <div className='col-12' style={{ backgroundColor: '#e8e8e8', textAlign: 'left', borderRadius: '3px', display: 'block', marginTop: '5px' }}>{chat.message}</div>}\n                                </div>\n                                )}\n                            </div>\n                            <div className=\"\">\n                                <div className=\"input-group mb-3\">\n\n                                    <input type='text' name=\"message\" value={this.state.message} className=\"form-control \" onChange={this.handleInputChange} placeholder=\"Type message here...\" />\n                                    <div className=\"input-group-append\" onClick={this.sendMessage}>\n                                        <span className=\"input-group-text ficon\" ><FontAwesomeIcon icon={faArrowRight} color='white' /></span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </Collapse>\n            </div>\n        )\n    }\n\n}\n\nexport default Users;","import axios from 'axios'\nconst BASE_URL = process.env.REACT_APP_SOCIAL_APP_BASE_URL\n\nconst PostPageService = {\n    addPosts : async (postContent) => {\n        try {\n            return await axios\n            .post(`${BASE_URL}post`, {content : postContent}, {\n                headers : {Authorization : 'Bearer ' + localStorage.getItem('access_token')}\n            });\n        } catch (e) {\n            console.dir(e.response);\n            if (e.response.status == 401) {\n                localStorage.removeItem('access_token');\n                window.location.replace('/login');\n            }\n            return false;\n        }\n        \n    },\n\n    addPostWithAttachment : async (postContent) => {\n        try {\n            return await axios\n            .post(`${BASE_URL}post-with-attachment`, postContent, {\n                headers : {Authorization : 'Bearer ' + localStorage.getItem('access_token'), 'content-type': 'multipart/form-data'}\n            });\n        } catch (e) {\n            console.dir(e.response);\n            if (e.response.status == 401) {\n                localStorage.removeItem('access_token');\n                window.location.replace('/login');\n            }\n            return false;\n        }\n        \n    }\n}\n\n\nexport default PostPageService;","const ReducerActions = {\n\n    LOAD_POSTS : 'LOAD_POSTS',\n    SET_ABOUT_TO_LOAD_POST_TRUE : 'SET_ABOUT_TO_LOAD_POST_TRUE',\n    RECEIVE_POSTS : 'SET_ABOUT_TO_LOAD_POST_TRUE',\n    DONE_LOADING_POSTS : 'DONE_LOADING_POSTS'\n\n}\n\n\n\nexport default ReducerActions;","import axios from 'axios';\nimport store from './store';\nimport ReducerActions from './reducer-action';\nconst BASE_URL = process.env.REACT_APP_SOCIAL_APP_BASE_URL;\nconst pageSize = 10;\n\nconst getHeader = () => {\n    return {Authorization : 'Bearer ' + localStorage.getItem('access_token')}\n}\n\nconst checkErrorAndRedirectIfNecessary = (error) => {\n    console.error(error)\n    try{\n        if (error.response.status == 401) {\n            localStorage.removeItem('access_token');\n            window.location.replace('/login');\n        }\n    } catch(error) {\n        console.error(error)\n        console.log(\"Error occurred during redirection\");\n        window.location.replace('/login');\n    }\n    \n}\nconst ReduxThunkFunctions = {\n\n    loadPosts : (pageNo=0) => {\n        store.dispatch({type: \"SET_ABOUT_TO_LOAD_POST_TRUE\"});\n        return  (dispatch, getState) => {\n            try {\n                const currentState = getState();\n                var url = `${BASE_URL}posts/?pageNo=${pageNo}&pageSize=${pageSize}`;\n                if (currentState.lastId > 0){\n                     url = `${BASE_URL}posts-with-lesser-id/?id=${currentState.lastId}&pageSize=${pageSize}`;\n                }\n                axios\n                .get(url, {\n                    headers : getHeader()\n                }).then(res=> {\n                    dispatch({type : \"RECEIVE_POSTS\", data:res.data})\n                }).catch((error, data)=> {\n                    console.log(error)\n                    checkErrorAndRedirectIfNecessary(error);\n                    dispatch({type: ReducerActions.DONE_LOADING_POSTS})\n                });\n            } catch (e) {\n                console.dir(e);\n                dispatch({type: ReducerActions.DONE_LOADING_POSTS})\n            }\n        }\n        \n    },\n\n    loadUsers : ()=> {\n        store.dispatch({type: \"LOADING_USERS\"});\n        return (dispatch, getState) => {\n            axios\n            .get(`${BASE_URL}load-users`, {\n                headers : getHeader()\n            })\n            .then(res => {\n                dispatch({type:'RECEIVE_USERS', data : res.data.users});\n                dispatch({type: \"DONE_LOADING_USERS\"});\n\n            })\n            .catch(err => {\n                console.error(err);\n                checkErrorAndRedirectIfNecessary(err);\n                dispatch({type: \"DONE_LOADING_USERS\"});\n            });\n        }\n        \n    },\n\n    loadCurrentUserInfo : () => {\n        return (dispatch, getState) => {\n            try {\n                axios\n                .get(`${BASE_URL}my-info`, {\n                    headers : {Authorization : `Bearer ${localStorage.getItem('access_token')}`}\n                }).then(res=> {\n                    dispatch({type:'SET_CURRENT_USER', data : res.data});\n                }).catch(err => {\n                    console.log(\"Error occurred due to \", err);\n                    checkErrorAndRedirectIfNecessary(err);\n                });\n            } catch(error) {\n\n            }\n        }\n    }\n\n}\n\n\nexport default ReduxThunkFunctions;","import React from 'react'\n\nimport { Card } from \"react-bootstrap\"\nimport Carousel from 'react-multi-carousel';\nimport 'react-multi-carousel/lib/styles.css';\nimport './post-item.css'\n\nconst PostItem = ({ post }) => {\n\n    const getProfilePictureOrAlternate = (display_picture) => {\n        return (display_picture !== undefined && display_picture !== null && display_picture !== '') ? (!display_picture.includes('http://')) ? `${display_picture}` : display_picture : 'image/no-image.png';\n    }\n\n    const responsive = {\n        desktop: {\n            breakpoint: { max: 3000, min: 1024 },\n            items: 1,\n            slidesToSlide: 1, // optional, default to 1.\n        },\n        tablet: {\n            breakpoint: { max: 1024, min: 464 },\n            items: 1,\n            slidesToSlide: 1, // optional, default to 1.\n        },\n        mobile: {\n            breakpoint: { max: 464, min: 0 },\n            items: 1,\n            slidesToSlide: 1, // optional, default to 1.\n        },\n    };\n\n    const getStringDate = (dbDate) => {\n        const date = new Date(dbDate);\n        // return date.getFullYear() + '/' + (date.getMonth() + 1) + '/' + (date.getDate()) + ' ' + (date.getHours()) + ':' + (date.getMinutes());\n        return date.getFullYear() + '/' + (date.getMonth() + 1).toString().padStart(2, '0') + '/' + (date.getDate()).toString().padStart(2, '0') + ' ' + (date.getHours()).toString().padStart(2, '0') + ':' + (date.getMinutes()).toString().padStart(2, '0');\n    }\n\n    return (\n        <div className='post-item-container post'>\n            <Card>\n                <Card.Body>\n                    <div id='post-item-header'>\n                        <div className=\"flexdev\">\n                            <img src={getProfilePictureOrAlternate(post.user.display_picture)} alt='None' className='userImage ' />\n                            <div className='poster-name image-text'>\n                                <span >{post.user.first_name} {post.user.last_name}</span><br />\n                                <span>{getStringDate(post.createdAt)}</span>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className='post-content'>\n                        {post.content}\n                    </div>\n\n                    <div className=\"attachment-div  col-md-12\">\n                        {post.attachments != null && post.attachments != '' && JSON.parse(post.attachments).length > 0 &&\n                            // JSON.parse(post.attachments).map(attachment =>\n                            // <img src={attachment} />\n                            <div>\n\n                                <Carousel responsive={responsive}>\n                                    {\n                                        JSON.parse(post.attachments).map((attachment, index) =>\n                                            <div>\n                                                {!attachment.endsWith(\".mp4\") && <img\n                                                    className=\"d-block w-100\"\n                                                    src={attachment}\n                                                    alt=\"Unable to load image\"\n                                                />}\n\n                                                {attachment.endsWith(\".mp4\") &&\n                                                    <video  controls className=\"d-block w-100\" id={\"videoPlayer\" + index} muted=\"muted\" preload=\"metadata\">\n                                                        <source src={attachment} type=\"video/mp4\" />\n                                                    </video>\n                                                }\n                                            </div>\n                                        )\n                                    }\n                                </Carousel>\n                            </div>\n                            // )\n                        }\n                    </div>\n                </Card.Body>\n            </Card>\n        </div>\n    );\n\n}\n\n\nexport default PostItem;","import './post-page.css';\nimport React from 'react';\nimport PostPageService from './postPageService';\nimport { Card, Button, Spinner, Alert } from 'react-bootstrap'\nimport { connect } from 'react-redux';\nimport ReduxThunkFunctions from '../redux/thunk-functions'\nimport PostItem from './post-item';\nimport debounce from 'lodash.debounce';\nimport axios from 'axios';\n\n\n\n\nclass PostPage extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: false,\n            isLoading: false,\n            hasMore: true,\n            open: false,\n            postContent: '',\n            myProfilePicture: '',\n            posting: false,\n            selectedFiles : []\n        }\n        this.loadUserInfo();\n        \n        let userAgentString =  navigator.userAgent; \n        this.chromeAgent = userAgentString.indexOf(\"Chrome\") > -1;\n        this.safariAgent =  userAgentString.indexOf(\"Safari\") > -1; \n        window.onscroll = debounce(() => {\n\n            const {\n                state: { error,\n                    isLoading,\n                    hasMore },\n\n            } = this;\n            console.log(\"Loading posts \" + props.loadingPosts);\n            if (error || props.loadingPosts || !hasMore) return;\n            // Checks that the page has scrolled to the bottom\n            // window.innerHeight + document.documentElement.scrollTop === document.documentElement.offsetHeight\n            if (\n                (document.documentElement.offsetHeight + document.documentElement.scrollTop === document.documentElement.scrollHeight && this.safariAgent) ||\n                (window.innerHeight + document.documentElement.scrollTop === document.documentElement.offsetHeight )\n            ) {\n                if (props.loadingPosts) {\n                    console.log(\"Data already loading\");\n                    return;\n                }\n                props.loadPosts();\n            } else {}\n\n        }, 100);\n\n        this.submitPost = this.submitPost.bind(this);\n        this.handlePostContentChange = this.handlePostContentChange.bind(this);\n\n    }\n\n    loadPosts = () => {\n        console.log(\"Called load posts method\");\n    }\n\n    componentDidMount() {\n        console.log(\"Component did mount\");\n    }\n\n    componentWillMount() {\n        this.props.loadPosts();\n    }\n\n    submitPost = async () => {\n        this.setState({\n            posting: true\n        });\n        const result = await PostPageService.addPosts(this.state.postContent);\n        if (result) {\n            await this.props.prependNewPost({ content: result.data.content, id: result.data.id, createdAt: result.data.createdAt, user: { first_name: window.localStorage.first_name, last_name: window.localStorage.last_name, display_picture : this.state.myProfilePicture } });\n            this.setState({\n                posting: false,\n                postContent: ''\n            });\n        }\n    }\n    addPostWithAttachmentIfAny = async (e)=> {\n        e.preventDefault();\n        this.setState({\n            posting: true\n        });\n        var formData = new FormData();\n        console.log(this.state.selectedFiles);\n        for(let i = 0; i< this.state.selectedFiles.length; i++) {\n            console.log(\"Appending\");\n            formData.append('files', this.state.selectedFiles[i])\n        }\n        formData.append('content', this.state.postContent);\n        console.log(formData);\n\n        const result = await PostPageService.addPostWithAttachment(formData);\n        if (result) {\n            await this.props.prependNewPost({ attachments: result.data.attachments, content: result.data.content, id: result.data.id, createdAt: result.data.createdAt, user: { first_name: window.localStorage.first_name, last_name: window.localStorage.last_name, display_picture : this.state.myProfilePicture } });\n            this.setState({\n                posting: false,\n                postContent: ''\n            });\n            document.getElementById('files').value= null;\n        } else {\n            alert(\"Error occurred during file upload. Kindly retry\");\n            this.setState({\n                posting: false,\n                postContent: ''\n            });\n        }\n    }\n    loadUserInfo = () => {\n        axios\n            .get(`${process.env.REACT_APP_SOCIAL_APP_BASE_URL}my-info`, { headers: { Authorization: 'Bearer ' + localStorage.getItem('access_token') } })\n            .then(res => {\n                if (res.data.display_picture !== undefined && res.data.display_picture !== null) {\n                    this.setState({ myProfilePicture: res.data.display_picture });\n                }\n            })\n            .catch(err => console.error(err));\n    }\n\n    handlePostContentChange = (e) => {\n        this.setState({\n            [e.target.name]: e.target.value\n        })\n    }\n    handleFileChange = (e) => {\n        this.setState({selectedFiles : e.target.files});\n    }\n    getPictureOrAlternatePicture = () => {\n        return (this.state.myProfilePicture === '' || this.state.myProfilePicture === undefined) ? 'image/no-image.png' : this.state.myProfilePicture;\n    }\n    render() {\n        return (\n\n            <div className=\"col-md-12\">\n\n                <Card className='add-post-card'>\n                    <Card.Header className='add-post-card-header'>Create post</Card.Header>\n                    <Card.Body className='add-post-card-body'>\n                        <div className=\"input-group mb-3\">\n                            <div className=\"input-group-append\">\n                                <img src={this.getPictureOrAlternatePicture()} height={50} width={50} className='user-image' />\n                            </div>\n                            <textarea name=\"postContent\" className=\"form-control input_user\" value={this.state.postContent} onChange={this.handlePostContentChange} placeholder=\"Write a post here....\" />\n                        </div>\n                <form onSubmit={this.addPostWithAttachmentIfAny} className='image-upload-form'>\n\n                        <input type=\"file\" multiple=\"multiple\" name='files' accept=\"video/mp4,image/png,image/jpeg\" id=\"files\" className='form-control image-input' onChange={this.handleFileChange} placeholder='Update display picture' /> <p/>\n                </form>\n                        <Button className='post-submit-button' onClick={this.addPostWithAttachmentIfAny} disabled={this.state.posting} >\n                            {this.state.posting ? <Spinner\n                                as=\"span\"\n                                animation=\"grow\"\n                                size=\"sm\"\n                                role=\"status\"\n                                aria-hidden=\"true\"\n                            /> : null}\n                            {this.state.posting ? <span>Posting...</span> : <span>Submit</span>}\n\n                        </Button>\n                    </Card.Body>\n                </Card>\n\n                {this.props.posts.map(post => <PostItem key={post.id} post={post} className='post' />)}\n\n                {(this.props.loadingPosts) ? <div>Loading....</div> : null}\n\n            </div>\n\n\n\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        posts: state.posts,\n        loadingPosts: state.loadingPosts\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        loadPosts: async () => {\n            console.log('about to load posts');\n            await dispatch(ReduxThunkFunctions.loadPosts());\n        },\n        resetLastIdFetched: () => {\n            dispatch({ type: 'RESET_LAST_ID' });\n        },\n        prependNewPost: (post) => {\n            dispatch({ type: 'PREPEND_POST_FROM_LOGGED_IN_USER', data: post })\n        }\n    }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)((PostPage));","import './DefaultPage.css'\nimport React from 'react';\nimport { withRouter } from 'react-router';\nimport Users from '../user/user';\nimport PostPage from '../post-page/post-page';\nimport {Image} from 'react-bootstrap'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit, faUpload } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\n\nconst BASE_URL = `${process.env.REACT_APP_SOCIAL_APP_BASE_URL}`;\n\n\nclass DefaultPage extends React.Component {\n\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            selectedFile : undefined,\n            display_picture : localStorage.getItem('display_picture'),\n            uploading : false\n        }\n\n        this.handleFileChange = this.handleFileChange.bind(this);\n    }\n\n    getImageFullPath = (dp) => {\n        return dp === undefined || dp === '' || dp===null ? 'image/no-image.png' : dp;\n    }\n\n    updateDisplayPicture = (e)=> {\n        e.preventDefault();\n        var formData = new FormData();\n        console.log(this.state.selectedFile);\n        formData.append('file', this.state.selectedFile);\n        console.dir(formData);\n        this.setState({uploading : true});\n        axios\n          .post(`${BASE_URL}upload-image`, formData, {headers : {Authorization : 'Bearer ' + localStorage.getItem('access_token') , 'content-type': 'multipart/form-data'}})\n          .then(res => {\n              console.log(\"Successfully uploaded image\");\n              localStorage.setItem('display_picture', res.data.display_picture );\n              this.setState({\n                display_picture : res.data.display_picture,\n                uploading : false\n              });\n            })\n          .catch(err => {this.setState({uploading : false}); console.error(err)});\n    }\n\n    handleFileChange = (e) => {\n        this.setState({selectedFile : e.target.files[0]});\n    }\n    render() {\n        return (\n\n            <div className=\"col-md-12\">\n\n\n                <div className=\" col-md-3 chatDiv mydivs\">\n                    <Users />\n                </div>\n                <div className=\" col-md-6 mydivs postDiv\">\n\n                    <PostPage history={this.props.history} />\n\n                </div>\n\n                <div className=\" col-md-3 mydivs user-info-div\">\n                <Image className='profile-picture' src = {this.state.display_picture} width={200} height={200} roundedCircle />\n                <form onSubmit={this.updateDisplayPicture} className='image-upload-form'>\n\n                <input type=\"file\" name='file' className='form-control image-input' onChange={this.handleFileChange} placeholder='Update display picture' /> <p/>\n                <input type='submit' className='btn btn-primary btn-sm' value={!this.state.uploading ? 'Update Profile Picture' : 'Upload in progress'} disabled={this.state.uploading} />\n                {/* <FontAwesomeIcon onClick={this.updateDisplayPicture} icon={faUpload}  /> */}\n                </form>\n\n                <div>\n                    Name : {localStorage.first_name} {localStorage.last_name}<p/>\n                    Email : {localStorage.email}<p/>\n                    Gender : {localStorage.gender}<p/>\n                </div>\n                </div>\n\n                </div>\n        )\n    }\n}\n\nexport default withRouter(DefaultPage);","import React from 'react';\nimport {} from 'react-bootstrap'\n\nclass UserSearchList extends React.Component {\n\n    getImageFullPath = (dp) => {\n        return dp === undefined || dp === '' || dp===null ? 'image/no-image.png' : process.env.REACT_APP_SOCIAL_APP_BASE_URL+dp;\n    }\n\n    render() {\n        return(\n            <div className='user-search-list-item'>\n                <img className='user-search-list-item-image' src={this.getImageFullPath(this.props.display_picture)} height={30} width={30} alt=\"\" /> &nbsp; &nbsp;{this.props.first_name} {this.props.last_name}\n            </div>\n        )\n    }\n}\n\n\nexport default UserSearchList;","import React, { useRef } from 'react'\nimport './navbar.css';\nimport { Navbar, InputGroup, Nav, FormControl, Form, NavDropdown, Overlay, ButtonToolbar, Popover } from 'react-bootstrap'\nimport { NavLink, withRouter } from 'react-router-dom'\nimport { faSearch } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport UserService from '../user/user-service';\nimport { debounce } from \"lodash\";\nimport axios from 'axios';\nimport UserSearchList from './user-search-list';\nconst BASE_URL = `${process.env.REACT_APP_SOCIAL_APP_BASE_URL}`\n\nclass AppNavbar extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.ref = React.createRef();\n        this.state = {\n            showMore: false,\n            target: undefined,\n            searchFilter: '',\n            users: []\n        };\n\n        this.loadUsersByFilter = this.loadUsersByFilter.bind(this);\n    }\n\n    componentWillMount() {\n        console.log(\"Component will mount\");\n        if (this.props.loadLogin) {\n            this.props.history.push({pathname : '/login/:', state : {ool : 'olam'}}, {name : 'ola', state : {ool : 'olam'}})\n        }\n    }\n\n    logout = () => {\n        UserService.logout();\n        window.localStorage.removeItem('username');\n        window.localStorage.removeItem('first_name');\n        window.localStorage.removeItem('last_name');\n        window.localStorage.removeItem('access_token');\n        window.location.href = '/';\n    }\n\n    loadInfoPage = () => {\n        this.props.history.push('/info');\n    }\n\n    searchField = (e) => {\n        console.log(\"Done\")\n        this.setState({\n            target: e.target,\n            showMore: true\n        })\n    }\n    loadUsersByFilters = (e) => {\n        console.log(e.target.value);\n        this.setState({\n            searchFilter: e.target.value,\n            target: e.target\n        });\n    }\n\n    getImageFullPath = (dp) => {\n        return \"http://localhost:3001/\" + dp\n    }\n\n    viewUserProfile = (username) => {\n        this.setState({\n            showMore : false\n        })\n        this.props.history.push('/profile/'+username);\n    }\n    fetchUserInformation = debounce(() => {\n\n        console.log(\"yyyy\")\n        if (this.state.searchFilter === undefined || this.state.searchFilter.length < 3) { return; }\n        axios\n            .get(`${BASE_URL}filter-users/${this.state.searchFilter}`, {\n                headers : {Authorization : 'Bearer ' + localStorage.getItem('access_token')}\n            })\n            .then(res => {\n                console.dir(this.state.target.name)\n                if (res.data.length < 1) { return; }\n                this.setState({\n                    users: res.data,\n                    showMore: true\n                });\n\n            })\n            .catch(err => console.error(err));\n    }, 3000);\n\n    setTarget = (e) => {\n\n    }\n\n    loadUsersByFilter = (e) => {\n        this.setState({\n            searchFilter: e.target.value,\n            target: e.target\n        });\n        this.fetchUserInformation();\n    };\n\n\n    render() {\n        return this.props.loadLogin ? null : (\n            <div className='col-md-12 header-super-container'>\n                <div className='container col-md-6 header-container' >\n                    <Navbar expand='lg' bg='light'>\n                        <Navbar.Brand>\n                            <img src='/image/app-logo-image.png' height={30} width={30} alt='not available' />\n                        </Navbar.Brand>\n                        <Navbar.Toggle aria-controls='basic-navbar-bar' />\n                        <Navbar.Collapse>\n                            <Nav className=\"mr-auto\">\n                                <NavLink to=\"/page\">Home</NavLink>\n                            </Nav>\n                            <Form inline>\n                                <InputGroup>\n                                    <FormControl\n                                        placeholder=\"Username\"\n                                        aria-label=\"Username\"\n                                        name=\"searchFilter\"\n                                        onChange={this.loadUsersByFilter}\n                                        value={this.state.searchFilter}\n                                    />\n                                    <ButtonToolbar ref={this.ref}>\n                                        <Overlay\n                                            show={this.state.showMore}\n                                            target={this.state.target}\n                                            placement=\"bottom\"\n                                            container={this.ref.current}\n                                            containerPadding={30}\n                                        >\n                                            <Popover id=\"popover-contained\">\n                                                <Popover.Title as=\"h3\">Users</Popover.Title>\n                                                <Popover.Content className='user-list'>\n                                                    <div >{this.state.users.map(user => \n                                                    <div className='user-search-list-item' onClick={()=>{this.viewUserProfile(user.username)}}><UserSearchList key={user.username} first_name={user.first_name} last_name={user.last_name} display_picture={user.display_picture} /> </div>)}\n                                                    </div>\n\n                                                </Popover.Content>\n                                            </Popover>\n                                        </Overlay>\n                                    </ButtonToolbar>\n\n                                </InputGroup>\n                            </Form>\n\n                            {/* <Nav>\n                                    <NavLink to=\"#\"><img src='image/logo.png' height={30} width={30} /></NavLink>\n                                </Nav> */}\n                            <NavDropdown title={window.localStorage.username} id=\"nav-dropdown\">\n                                <NavDropdown.Item eventKey=\"4.3\" onClick={this.logout}>Log Out</NavDropdown.Item>\n                                <NavDropdown.Divider />\n                                <NavDropdown.Item eventKey=\"4.4\" onClick={this.loadInfoPage}>Edit profile</NavDropdown.Item>\n                            </NavDropdown>\n                        </Navbar.Collapse>\n                    </Navbar>\n\n                </div>\n            </div>\n        )\n    }\n}\n\n\nexport default withRouter(AppNavbar);","import React from 'react';\nimport './login.css'\nimport '../bootstrap/bootstrap.min.css'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUser, faKey } from '@fortawesome/free-solid-svg-icons';\nimport LoginService from './login.service';\nimport { Link, withRouter } from 'react-router-dom'\nimport { Button, Spinner } from 'react-bootstrap';\nimport store from '../redux/store';\n\nclass Login extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: '',\n            password: '',\n            loading: false,\n            errorMessage : '',\n        }\n        this.handleInputChange = this.handleInputChange.bind(this);\n    }\n\n    handleInputChange = (event) => {\n        this.setState({\n            [event.target.name]: event.target.value\n        });\n    }\n\n    componentWillMount() {\n        if (localStorage.getItem('access_token') != null) {\n            this.props.history.push('/')\n        }\n    }\n\n    login = async (e) => {\n        this.setState({\n            loading: true\n        });\n        e.preventDefault();\n        console.dir(this.state);\n        const response = await LoginService.login(this.state);\n        if (response.access_token) {\n            window.localStorage.setItem('access_token', response.access_token);\n            window.localStorage.setItem('username', response.properties.username);\n            window.localStorage.setItem('first_name', response.properties.first_name);\n            window.localStorage.setItem('last_name', response.properties.last_name);\n            window.localStorage.setItem('email', response.properties.email);\n            window.localStorage.setItem('display_picture', response.properties.display_picture);\n            window.localStorage.setItem('gender', response.properties.gender);\n            // store.dispatch({type:'SET_CURRENT_USER', data : response.access_token.user});\n            // this.props.history.push('/home')\n            window.location.href = '/'\n        } else {\n            this.setState(({\n                errorMessage : response.message\n            }));\n            this.setState({\n                loading: false\n            });\n        }\n    }\n\n    render() {\n        return (\n            <div className='wrapper'>\n                <div className='login-container justify-content-center'>\n                    <div className=\"brand_logo_container\">\n                        <img src=\"/image/app-logo-image.png\" className=\"brand_logo\" alt=\"Logo\" />\n                    </div>\n                    <div className='login-box'>\n                        <div className=''>\n                            <form className='col-10 offset-1 loginForm' onSubmit={this.login}>\n                                <div className=\"input-group mb-3\">\n\n                                    <div className='errorDiv col-12'>{this.state.errorMessage}</div>\n\n                                    <div className=\"input-group-append\">\n                                        <span className=\"input-group-text ficon\"><FontAwesomeIcon icon={faUser} color='white' /></span>\n                                    </div>\n                                    <input type=\"text\" name=\"username\" className=\"form-control input_user\" placeholder=\"username\" onChange={this.handleInputChange} />\n                                </div>\n\n                                <div className=\"input-group mb-3\">\n                                    <div className=\"input-group-append\">\n                                        <span className=\"input-group-text ficon\" ><FontAwesomeIcon icon={faKey} color='white' /></span>\n                                    </div>\n                                    <input type='password' name=\"password\" className=\"form-control input_user\" onChange={this.handleInputChange} placeholder=\"password\" />\n                                </div>\n\n                                <div className=\"input-group\">\n                                    <Button variant=\"primary\" className='form-control btn btn-danger md-col-12 pull-right loginButton' disabled={this.state.loading} onClick={this.login}>\n                                        {this.state.loading ? <Spinner\n                                            as=\"span\"\n                                            animation=\"grow\"\n                                            size=\"sm\"\n                                            role=\"status\"\n                                            aria-hidden=\"true\"\n                                        /> : null}\n                                        {this.state.loading ? <span>Signing in...</span> : <span>Login</span>}\n                                    </Button>\n                                </div>\n\n\n                            </form>\n                            <div className='userHelpDiv'>\n                                Don't have an account? <Link to=\"/signup\">Sign Up</Link> <p></p>\n                                <Link to='/signup'>Forgot your password?</Link>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Login);","import React from 'react';\nimport './signup.css'\nimport '../bootstrap/bootstrap.min.css'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUser, faKey, faEnvelope } from '@fortawesome/free-solid-svg-icons';\nimport LoginService from '../login/login.service';\nimport {Link} from 'react-router-dom';\nimport {Button, Spinner} from 'react-bootstrap';\n\nclass Signup extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: '',\n            password: '',\n            password2: '',\n            first_name: '',\n            last_name: '',\n            gender: '',\n            email: '',\n            loading : false,\n            signUpResponse : {successful : false, message:''}\n        }\n        this.handleInputChange = this.handleInputChange.bind(this);\n    }\n\n    handleInputChange = (event) => {\n        this.setState({\n            [event.target.name]: event.target.value\n        });\n    }\n\n    signup = async (e) => {\n        console.dir(this.state);\n        this.setState({\n            loading: true\n        });\n        const response = await LoginService.signUp(this.state);\n        console.dir(response);\n        if (response.successful) {\n            this.setState({signUpResponse:{successful : true, message : 'Login successful'}});\n            this.setState({\n                username: '',\n                password: '',\n                password2: '',\n                first_name: '',\n                last_name: '',\n                gender: '',\n                email: '',\n            });\n        } else {\n            this.setState({signUpResponse:{successful : false, message : response.message}})\n        }\n        this.setState({\n            loading: false\n        });\n    }\n\n    render() {\n        return (\n            <div className='wrapper'>\n                <div className='signup-container justify-content-center'>\n                    <div className=\"brand_logo_container\">\n                        <img src=\"/image/app-logo-image.png\" className=\"brand_logo\" alt=\"Logo\" />\n                    </div>\n                    <div className='signup-box'>\n                        <div className=''>\n                            <form className='col-10 offset-1 signupForm' >\n                                <div className='errorDiv'>\n                                    {this.state.signUpResponse.message}\n                                </div>\n                                <div className=\"input-group mb-3\">\n                                    <div className=\"input-group-append\">\n                                        <span className=\"input-group-text ficon\"><FontAwesomeIcon icon={faUser} color='white' /></span>\n                                    </div>\n                                    <input type=\"text\" name=\"username\" className=\"form-control input_user\" value={this.state.username} placeholder=\"username\" onChange={this.handleInputChange} />\n                                </div>\n                                <div className=\"input-group mb-3\">\n                                    <div className=\"input-group-append\">\n                                        <span className=\"input-group-text ficon\"><FontAwesomeIcon icon={faUser} color='white' /></span>\n                                    </div>\n                                    <input type=\"text\" name=\"first_name\" className=\"form-control input_user\" value={this.state.first_name} placeholder=\"First name\" onChange={this.handleInputChange} />\n                                </div>\n                                <div className=\"input-group mb-3\">\n                                    <div className=\"input-group-append\">\n                                        <span className=\"input-group-text ficon\"><FontAwesomeIcon icon={faUser} color='white' /></span>\n                                    </div>\n                                    <input type=\"text\" name=\"last_name\" className=\"form-control input_user\" placeholder=\"Last name\" value={this.state.last_name} onChange={this.handleInputChange} />\n                                </div>\n                                <div className=\"input-group mb-3\">\n                                    <div className=\"input-group-append\">\n                                        <span className=\"input-group-text ficon\"><FontAwesomeIcon icon={faEnvelope} color='white' /></span>\n                                    </div>\n                                    <input type=\"email\" name=\"email\" className=\"form-control input_user\" placeholder=\"Email address\" value={this.state.email} onChange={this.handleInputChange} />\n                                </div>\n                                <div className=\"input-group mb-3\">\n                                    <div className=\"input-group-append\">\n                                        <span className=\"input-group-text ficon\"><FontAwesomeIcon icon={faUser} color='white' /></span>\n                                    </div>\n                                    <select name=\"gender\" className=\"form-control input_user\" value={this.state.gender} onChange={this.handleInputChange}>\n                                        <option value=''> -- Select gender -- </option>\n                                        <option value='MALE'> MALE </option>\n                                        <option value='FEMALE'>FEMALE</option>\n                                    </select>\n                                </div>\n\n                                <div className=\"input-group mb-3\">\n                                    <div className=\"input-group-append\">\n                                        <span className=\"input-group-text ficon\" ><FontAwesomeIcon icon={faKey} color='white' /></span>\n                                    </div>\n                                    <input type='password' name=\"password\" className=\"form-control input_user\" value={this.state.password} onChange={this.handleInputChange} placeholder=\"password\" />\n                                </div>\n\n                                <div className=\"input-group mb-3\">\n                                    <div className=\"input-group-append\">\n                                        <span className=\"input-group-text ficon\" ><FontAwesomeIcon icon={faKey} color='white' /></span>\n                                    </div>\n                                    <input type='password' name=\"password2\" className=\"form-control input_user\" value={this.state.password2} onChange={this.handleInputChange} placeholder=\"Confirm password\" />\n                                </div>\n                                <div className=\"input-group\">\n                                    <Button onClick={this.signup} className='form-control btn btn-danger md-col-12 pull-right signUpButton'>\n                                    {this.state.loading ? <Spinner\n                                            as=\"span\"\n                                            animation=\"grow\"\n                                            size=\"sm\"\n                                            role=\"status\"\n                                            aria-hidden=\"true\"\n                                        /> : null}\n                                        {this.state.loading ? <span>Registering user...</span> : <span>SignUp</span>}\n                                    </Button>\n                                    {/* <input type=\"submit\" value='SignUp' className='form-control btn btn-danger md-col-12 pull-right signUpButton' /> */}\n                                </div>\n                            </form>\n                            <div className='userHelpDiv'>\n                                Already have an account? <Link to=\"/login\">Sign In</Link> <p></p>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Signup;","import React from 'react';\nimport { Link, withRouter } from 'react-router-dom'\nimport './user-info.css';\nimport { Card, Button, Spinner } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUser, faKey, faEnvelope } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\nconst BASE_URL = process.env.REACT_APP_SOCIAL_APP_BASE_URL\n\nclass UserInfo extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            message: '',\n            username: '',\n            first_name: '',\n            last_name: '',\n            email: '',\n            gender: '',\n            display_picture: '',\n            newPassword1: '..........',\n            newPassword2: '......',\n            currentPassword: '..............',\n            successfulMessage: '',\n            errorMessage: '',\n            loading : false\n\n        };\n        this.getCurrentUserInfo();\n    }\n\n    getCurrentUserInfo = () => {\n        axios\n            .get(`${BASE_URL}my-info`, { headers: { Authorization: 'Bearer ' + localStorage.getItem('access_token') } })\n            .then(res => this.mapUserInfoToState(res.data))\n            .catch(err => console.error(err));\n    }\n\n    mapUserInfoToState = (data) => {\n        const { username, first_name, last_name, gender, email, display_picture } = data;\n        this.setState(() => {\n            return {\n                username, first_name, last_name, gender, email, display_picture\n            }\n        }, () => console.log(\"====>\"));\n    }\n\n    handleInputChange = (e) => {\n        this.setState({\n            [e.target.name]: e.target.value\n        });\n    }\n\n    updateUserInformation = () => {\n        if (this.state.loading){return;}\n        this.setState({\n            successfulMessage: '',\n            errorMessage: '',\n            loading : true\n        });\n        const { email, password, first_name, last_name } = this.state;\n        axios\n            .post(`${BASE_URL}update-my-info`, { email, password, first_name, last_name }, {\n                headers:\n                    { Authorization: 'Bearer ' + localStorage.getItem('access_token') }\n            })\n            .then(res => {\n                const { data } = res;\n                const { message } = data;\n                console.log(message)\n                this.setState({ successfulMessage: message, loading : false });\n            })\n            .catch(err => {\n                console.error(err);\n                const { response } = err;\n                console.dir(response);\n                const { status, data } = response;\n                if (status === 401) {\n                    localStorage.removeItem('access_token');\n                    window.location.replace('/login');\n                }\n                this.setState({ errorMessage: data.message, loading : false })\n            });\n    }\n\n    updateUserPassword = () => {\n        if (this.state.loading){return;}\n        this.setState({\n            successfulMessage: '',\n            errorMessage: '',\n            loading : true\n        });\n        const { currentPassword, newPassword1 } = this.state;\n        axios\n            .post(`${BASE_URL}update-password`, { currentPassword, newPassword : newPassword1 }, {\n                headers:\n                    { Authorization: 'Bearer ' + localStorage.getItem('access_token') }\n            })\n            .then(res => {\n                const { data } = res;\n                const { message } = data;\n                console.log(message)\n                this.setState({ successfulMessage: message, loading : false });\n            })\n            .catch(err => {\n                console.error(err);\n                const { response } = err;\n                console.dir(response);\n                const { status, data } = response;\n                if (status === 401) {\n                    localStorage.removeItem('access_token');\n                    window.location.replace('/login');\n                }\n                this.setState({ errorMessage: data.message, loading : false })\n            });\n    }\n    render() {\n        return (\n            <div className='col-md-6 offset-md-3 user-info-container'>\n\n                <Card>\n                    <Card.Header>User Information</Card.Header>\n                    <Card.Body>\n                        Edit your information below\n                       <form className='' >\n                            <div className='errorDiv'>\n                                {this.state.errorMessage}\n                            </div>\n                            <div className='successDiv'>\n                                {this.state.successfulMessage}\n                            </div>\n                            <div className=\"input-group mb-3\">\n                                <div className=\"input-group-append\">\n                                    <span className=\"input-group-text ficon\"><FontAwesomeIcon icon={faUser} color='white' /></span>\n                                </div>\n                                <input type=\"text\" name=\"username\" disabled className=\"form-control input_user\" value={this.state.username} placeholder=\"username\" onChange={this.handleInputChange} />\n                            </div>\n                            <div className=\"input-group mb-3\">\n                                <div className=\"input-group-append\">\n                                    <span className=\"input-group-text ficon\"><FontAwesomeIcon icon={faUser} color='white' /></span>\n                                </div>\n                                <input type=\"text\" name=\"first_name\" className=\"form-control input_user\" value={this.state.first_name} placeholder=\"First name\" onChange={this.handleInputChange} />\n                            </div>\n                            <div className=\"input-group mb-3\">\n                                <div className=\"input-group-append\">\n                                    <span className=\"input-group-text ficon\"><FontAwesomeIcon icon={faUser} color='white' /></span>\n                                </div>\n                                <input type=\"text\" name=\"last_name\" className=\"form-control input_user\" placeholder=\"Last name\" value={this.state.last_name} onChange={this.handleInputChange} />\n                            </div>\n                            <div className=\"input-group mb-3\">\n                                <div className=\"input-group-append\">\n                                    <span className=\"input-group-text ficon\"><FontAwesomeIcon icon={faEnvelope} color='white' /></span>\n                                </div>\n                                <input type=\"email\" name=\"email\" className=\"form-control input_user\" placeholder=\"Email address\" value={this.state.email} onChange={this.handleInputChange} />\n                            </div>\n                            <div className=\"input-group mb-3\">\n                                <div className=\"input-group-append\">\n                                    <span className=\"input-group-text ficon\"><FontAwesomeIcon icon={faUser} color='white' /></span>\n                                </div>\n                                <select name=\"gender\" disabled className=\"form-control input_user\" value={this.state.gender} onChange={this.handleInputChange}>\n                                    <option value=''> -- Select gender -- </option>\n                                    <option value='MALE'> MALE </option>\n                                    <option value='FEMALE'>FEMALE</option>\n                                </select>\n                            </div>\n\n                            <div className=\"input-group mb-3\">\n                                <div className=\"input-group-append\">\n                                    <span className=\"input-group-text ficon\" ><FontAwesomeIcon icon={faKey} color='white' /></span>\n                                </div>\n                                <input type='password' name=\"password\" className=\"form-control input_user\" value={this.state.password} onChange={this.handleInputChange} placeholder=\"Current password\" />\n                            </div>\n\n                            <div className=\"input-group\">\n                                <Button onClick={this.updateUserInformation} className='form-control btn btn-danger md-col-12 pull-right signUpButton'>\n                                    {this.state.loading ? <Spinner\n                                        as=\"span\"\n                                        animation=\"grow\"\n                                        size=\"sm\"\n                                        role=\"status\"\n                                        aria-hidden=\"true\"\n                                    /> : null}\n                                    {this.state.loading ? <span>Updating user information...</span> : <span>Update your information</span>}\n                                </Button>\n                                {/* <input type=\"submit\" value='SignUp' className='form-control btn btn-danger md-col-12 pull-right signUpButton' /> */}\n                            </div>\n\n                        </form>\n                        <p />\n                        <div>Update Password</div><p />\n                        <div className=\"input-group mb-3\">\n                            <div className=\"input-group-append\">\n                                <span className=\"input-group-text ficon\" ><FontAwesomeIcon icon={faKey} color='white' /></span>\n                            </div>\n                            <input type='password' name=\"currentPassword\" className=\"form-control input_user\" value={this.state.currentPassword} onChange={this.handleInputChange} placeholder=\"Current password\" />\n                        </div>\n\n                        <div className=\"input-group mb-3\">\n                            <div className=\"input-group-append\">\n                                <span className=\"input-group-text ficon\" ><FontAwesomeIcon icon={faKey} color='white' /></span>\n                            </div>\n                            <input type='password' name=\"newPassword1\" className=\"form-control input_user\" value={this.state.newPassword1} onChange={this.handleInputChange} placeholder=\"New password\" />\n                        </div>\n                        <div className=\"input-group mb-3\">\n                            <div className=\"input-group-append\">\n                                <span className=\"input-group-text ficon\" ><FontAwesomeIcon icon={faKey} color='white' /></span>\n                            </div>\n                            <input type='password' name=\"newPassword2\" className=\"form-control input_user\" value={this.state.newPassword2} onChange={this.handleInputChange} placeholder=\"Confirm new password\" />\n                        </div>\n                        <div className=\"input-group\">\n                            <Button onClick={this.updateUserPassword} className='form-control btn btn-danger md-col-12 pull-right signUpButton'>\n                                {this.state.loading ? <Spinner\n                                    as=\"span\"\n                                    animation=\"grow\"\n                                    size=\"sm\"\n                                    role=\"status\"\n                                    aria-hidden=\"true\"\n                                /> : null}\n                                {this.state.loading ? <span>Updating user's password ...</span> : <span>Update Password</span>}\n                            </Button>\n                        </div>\n                    </Card.Body>\n                </Card>\n            </div>\n        )\n    }\n\n}\n\n\n\nexport default withRouter(UserInfo);","import React from 'react'\nimport { Table, Image } from 'react-bootstrap'\nimport './user-profile.css';\nimport { withRouter } from 'react-router';\nimport axios from 'axios';\nconst BASE_URL = process.env.REACT_APP_SOCIAL_APP_BASE_URL;\n\nclass UserProfile extends React.Component {\n\n    constructor(props) {\n        super(props);\n        console.dir(props.match.params);\n        if (!props.match.params.username) {\n            window.location.href('/');\n        }\n        this.state = {\n            userInfo: {},\n            loading: true\n        }\n        const username = props.match.params.username;\n        axios\n            .get(`${BASE_URL}find-user/${username}`, {\n                headers : {Authorization : 'Bearer ' + localStorage.getItem('access_token')}\n            })\n            .then(res => {\n                this.setState({\n                    userInfo: res.data,\n                    loading: false\n                })\n            })\n            .catch(err => {\n                console.error(err)\n                this.setState({\n                    loading: false\n                });\n                this.props.history.push('/');\n            });\n\n    }\n\n    getImageFullPath = (dp) => {\n        return dp === undefined || dp === '' || dp===null ? 'image/no-image.png' : dp;\n    }\n\n    render() {\n\n\n\n        return (\n            this.state.loading ? <div>Loading</div>\n                :\n                <div className=\"row user-profile\">\n                    <div className='col-md-3 user-profile-image'>\n                        <Image src = {this.getImageFullPath(this.state.userInfo.display_picture)} width={200} height={200} roundedCircle />\n                </div>\n\n                    <div className='col-md-6 info-display' >\n                        <Table responsive>\n                            <tbody striped>\n                                <tr>\n                                    <td>Username</td>\n                                    <td>{this.state.userInfo.username}</td>\n                                </tr>\n                                <tr>\n                                    <td>First Name</td>\n                                    <td>{this.state.userInfo.first_name}</td>\n                                </tr>\n                                <tr>\n                                    <td>Last Name</td>\n                                    <td>{this.state.userInfo.last_name}</td>\n                                </tr>\n                                <tr>\n                                    <td>Gender</td>\n                                    <td>{this.state.userInfo.gender}</td>\n                                </tr>\n                                <tr>\n                                    <td>Email Address</td>\n                                    <td>{this.state.userInfo.email}</td>\n                                </tr>\n                            </tbody>\n                        </Table>\n                    </div>\n                </div>\n        )\n\n    }\n\n}\n\nexport default withRouter(UserProfile);","import './home.css'\nimport React from 'react';\nimport { Route, BrowserRouter, Switch, Redirect } from 'react-router-dom'\nimport DefaultPage from '../default-page/DefaultPage';\nimport AppNavbar from '../navbar/navbar';\nimport Login from '../login/login'\nimport Signup from '../signup/signup';\nimport UserInfo from '../user-info/user-info';\nimport UserProfile from  '../user-profile/user-profile';\n\n\n\nclass Home extends React.Component {\n\n    render() {\n        return (\n\n            <div className='home-container-super'>\n\n                <BrowserRouter>\n                <AppNavbar loadLogin={this.props.loadLogin}/>\n                            <Switch>\n                            <Route exact path='/' component={DefaultPage} />\n                            <Route path='/login' component={Login} />\n                            <Route path='/signup' component={Signup} /> \n                            <Route path='/info' component={UserInfo} />\n                            <Route path='/profile/:username' component={UserProfile} />\n                            <Route component={DefaultPage} />\n                            </Switch>\n                </BrowserRouter>\n\n                <div className='content'>\n\n                </div>\n\n            </div>\n\n\n\n\n        )\n    }\n}\n\n\nexport default Home;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport * as ReactRedux from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\nimport store from './redux/store';\nimport Home from './home/home';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconsole.dir(process.env.REACT_APP_SOCIAL_APP_BASE_URL);\nconsole.dir(process.env.REACT_APP_SOCIAL_APP_S3_URL);\nconst loadLogin = (window.localStorage.getItem('access_token') == null) ? true : false;\n\nReactDOM.render(\n<ReactRedux.Provider store={store}>\n    <Home loadLogin={loadLogin}/>\n</ReactRedux.Provider>\n, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import axios from 'axios'\nimport queryString from 'query-string'\n\nconst LOGIN_URL = `${process.env.REACT_APP_SOCIAL_APP_BASE_URL}oauth/token?grant_type=password`;\nconst SIGNUP_URL = `${process.env.REACT_APP_SOCIAL_APP_BASE_URL}signup`;\nconst CLIENT_ID = 'zeed';\nconst CLIENT_SECRET = 'password';\nconst DEFAULT_ERROR_MESSAGE = 'An error occurred. Kindly contact admin or try again';\n\nconst login = async (loginData) => {\n    try {\n        loginData.grant_type = 'password';\n        console.log('login data ' + JSON.stringify(loginData));\n        var response = await axios.post(LOGIN_URL, queryString.stringify(loginData), {\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n                'Authorization': getBase64StringFromClientCredentials()\n            }\n        });\n        return response.data;\n\n    } catch (e) {\n        console.dir(e.response);\n        console.log(\"error occurred due to \" + e.response);\n        var message = '';\n        if (e.response && e.response.data) {\n            message = (e.response.data.error_description && e.response.data.error_description.includes('Invalid resource')) ? 'Invalid Credentials' : e.response.data.message;\n        } else if (e.error) {\n            message = e.error;\n        } else {\n            message = DEFAULT_ERROR_MESSAGE;\n        }\n        return {message : message};\n    }\n\n}\nconst signUp = async (signUpData) => {\n    try {\n        console.log('login data ' + JSON.stringify(signUpData))\n        await axios.post(SIGNUP_URL, signUpData);\n        return {successful : true};\n    } catch (e) {\n        console.dir(e.response);\n        console.log(\"error occurred due to \" + e);\n        var message = '';\n        if (e.response && e.response.data) {\n            message = e.response.data.message;\n        } else if (e.error) {\n            message = e.error;\n        } else {\n            message = DEFAULT_ERROR_MESSAGE;\n        }\n        return {message : message};\n    }\n}\n\nconst getBase64StringFromClientCredentials = () => {\n    const encodedString = 'Basic ' + (new Buffer(`${CLIENT_ID}:${CLIENT_SECRET}`).toString('base64'));\n    return encodedString;\n}\n\n\nexport default { login, signUp };"],"sourceRoot":""}